/**
 *  Copyright 2013 Alma Madsen
 *
 *  BetaCreator is Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */


/*
Portions of this code are from the Dojo Toolkit, received by
 The Closure Library Authors under the BSD license. All other code is
 Copyright 2005-2009 The Closure Library Authors. All Rights Reserved.

The "New" BSD License:

Copyright (c) 2005-2009, The Dojo Foundation
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

 Redistributions of source code must retain the above copyright notice, this
    list of conditions and the following disclaimer.
 Redistributions in binary form must reproduce the above copyright notice,
    this list of conditions and the following disclaimer in the documentation
    and/or other materials provided with the distribution.
 Neither the name of the Dojo Foundation nor the names of its contributors
    may be used to endorse or promote products derived from this software
    without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE
FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/


/*

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/
var l,n=this||self;function aa(){}
function ba(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function p(a){return"array"==ba(a)}function ca(a){var b=ba(a);return"array"==b||"object"==b&&"number"==typeof a.length}function q(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}var da="closure_uid_"+(1E9*Math.random()>>>0),ea=0;function fa(a,b,c){return a.call.apply(a.bind,arguments)}
function ha(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,d);return a.apply(b,e)}}return function(){return a.apply(b,arguments)}}function r(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?r=fa:r=ha;return r.apply(null,arguments)}
function u(a,b){function c(){}c.prototype=b.prototype;a.Ia=b.prototype;a.prototype=new c;a.prototype.constructor=a};var ia={},ja;function ka(a){if(Error.captureStackTrace)Error.captureStackTrace(this,ka);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}u(ka,Error);ka.prototype.name="CustomError";function la(a,b){a=a.split("%s");for(var c="",d=a.length-1,e=0;e<d;e++)c+=a[e]+(e<b.length?b[e]:"%s");ka.call(this,c+a[d])}u(la,ka);la.prototype.name="AssertionError";function ma(a,b){throw new la("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1));};function na(a,b){for(var c in a)b.call(void 0,a[c],c,a)}var oa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function pa(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<oa.length;f++)c=oa[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var qa=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if("string"===typeof a)return"string"!==typeof b||1!=b.length?-1:a.indexOf(b,0);for(var c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},v=Array.prototype.forEach?function(a,b){Array.prototype.forEach.call(a,b,void 0)}:function(a,b){for(var c=a.length,d="string"===typeof a?a.split(""):a,e=0;e<c;e++)e in d&&b.call(void 0,d[e],e,a)},ra=Array.prototype.filter?function(a,b){return Array.prototype.filter.call(a,
b,void 0)}:function(a,b){for(var c=a.length,d=[],e=0,f="string"===typeof a?a.split(""):a,g=0;g<c;g++)if(g in f){var h=f[g];b.call(void 0,h,g,a)&&(d[e++]=h)}return d},sa=Array.prototype.some?function(a,b){Array.prototype.some.call(a,b,void 0)}:function(a,b){for(var c=a.length,d="string"===typeof a?a.split(""):a,e=0;e<c&&!(e in d&&b.call(void 0,d[e],e,a));e++);};
function ta(a,b){a:{for(var c=a.length,d="string"===typeof a?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a)){b=e;break a}b=-1}return 0>b?null:"string"===typeof a?a.charAt(b):a[b]}function ua(a,b){b=qa(a,b);var c;(c=0<=b)&&Array.prototype.splice.call(a,b,1);return c}function va(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]};function y(a,b,c){return Math.min(Math.max(a,b),c)};function z(a,b){this.x=void 0!==a?a:0;this.y=void 0!==b?b:0}l=z.prototype;l.toString=function(){return"("+this.x+", "+this.y+")"};function wa(a,b){var c=a.x-b.x;a=a.y-b.y;return Math.sqrt(c*c+a*a)}l.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};l.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};l.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};
l.scale=function(a,b){this.x*=a;this.y*="number"===typeof b?b:a;return this};var xa=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]},ya=/&/g,za=/</g,Aa=/>/g,Ba=/"/g,Ca=/'/g,Da=/\x00/g,Ea=/[\x00&<>"']/;
function Fa(a,b){var c=0;a=xa(String(a)).split(".");b=xa(String(b)).split(".");for(var d=Math.max(a.length,b.length),e=0;0==c&&e<d;e++){var f=a[e]||"",g=b[e]||"";do{f=/(\d*)(\D*)(.*)/.exec(f)||["","","",""];g=/(\d*)(\D*)(.*)/.exec(g)||["","","",""];if(0==f[0].length&&0==g[0].length)break;c=Ga(0==f[1].length?0:parseInt(f[1],10),0==g[1].length?0:parseInt(g[1],10))||Ga(0==f[2].length,0==g[2].length)||Ga(f[2],g[2]);f=f[3];g=g[3]}while(0==c)}return c}function Ga(a,b){return a<b?-1:a>b?1:0};function Ha(a,b){this.c=a===Ia&&b||"";this.f=Ja}Ha.prototype.wa=!0;Ha.prototype.va=function(){return this.c};Ha.prototype.toString=function(){return"Const{"+this.c+"}"};var Ja={},Ia={},Ka=new Ha(Ia,"");function La(a,b){this.c=a===Ma&&b||"";this.f=Na}La.prototype.wa=!0;La.prototype.va=function(){return this.c.toString()};La.prototype.toString=function(){return"TrustedResourceUrl{"+this.c+"}"};var Na={},Ma={};var A;a:{var Oa=n.navigator;if(Oa){var Pa=Oa.userAgent;if(Pa){A=Pa;break a}}A=""}function B(a){return-1!=A.indexOf(a)};function Qa(){return B("Firefox")||B("FxiOS")}function Ra(){return(B("Chrome")||B("CriOS"))&&!B("Edge")};function Sa(){this.c="";this.f=Ta}Sa.prototype.wa=!0;Sa.prototype.va=function(){return this.c.toString()};Sa.prototype.toString=function(){return"SafeHtml{"+this.c+"}"};function Ua(){var a=Va;if(a instanceof Sa&&a.constructor===Sa&&a.f===Ta)return a.c;ma("expected object of type SafeHtml, got '"+a+"' of type "+ba(a));return"type_error:SafeHtml"}var Ta={};function Wa(a){var b=new Sa;b.c=a;return b}Wa("<!DOCTYPE html>");var Va=Wa("");Wa("<br>");function Xa(a){if(Ka instanceof Ha&&Ka.constructor===Ha&&Ka.f===Ja)var b=Ka.c;else ma("expected object of type Const, got '"+Ka+"'"),b="type_error:Const";b=new La(Ma,b);a:{try{var c=a&&a.ownerDocument,d=c&&(c.defaultView||c.parentWindow);d=d||n;if(d.Element&&d.Location){var e=d;break a}}catch(g){}e=null}if(e&&"undefined"!=typeof e.HTMLIFrameElement&&(!a||!(a instanceof e.HTMLIFrameElement)&&(a instanceof e.Location||a instanceof e.Element))){if(q(a))try{var f=a.constructor.displayName||a.constructor.name||
Object.prototype.toString.call(a)}catch(g){f="<object could not be stringified>"}else f=void 0===a?"undefined":null===a?"null":typeof a;ma("Argument is not a %s (or a non-Element, non-Location mock); got: %s","HTMLIFrameElement",f)}b instanceof La&&b.constructor===La&&b.f===Na?e=b.c:(ma("expected object of type TrustedResourceUrl, got '"+b+"' of type "+ba(b)),e="type_error:TrustedResourceUrl");a.src=e.toString()};function Ya(a){Ea.test(a)&&(-1!=a.indexOf("&")&&(a=a.replace(ya,"&amp;")),-1!=a.indexOf("<")&&(a=a.replace(za,"&lt;")),-1!=a.indexOf(">")&&(a=a.replace(Aa,"&gt;")),-1!=a.indexOf('"')&&(a=a.replace(Ba,"&quot;")),-1!=a.indexOf("'")&&(a=a.replace(Ca,"&#39;")),-1!=a.indexOf("\x00")&&(a=a.replace(Da,"&#0;")));return a}function Za(a){for(var b=0;1>b;b++)if('"'==a.charAt(0)&&'"'==a.charAt(a.length-1))return a.substring(1,a.length-1);return a}
var $a={"\x00":"\\0","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\x0B",'"':'\\"',"\\":"\\\\","<":"\\u003C"},ab={"'":"\\'"};
function bb(a){a=String(a);for(var b=['"'],c=0;c<a.length;c++){var d=a.charAt(c),e=d.charCodeAt(0),f=c+1,g;if(!(g=$a[d])){if(!(31<e&&127>e))if(d in ab)d=ab[d];else if(d in $a)d=ab[d]=$a[d];else{g=d.charCodeAt(0);if(31<g&&127>g)e=d;else{if(256>g){if(e="\\x",16>g||256<g)e+="0"}else e="\\u",4096>g&&(e+="0");e+=g.toString(16).toUpperCase()}d=ab[d]=e}g=d}b[f]=g}b.push('"');return b.join("")}function cb(a){return String(a).replace(/\-([a-z])/g,function(b,c){return c.toUpperCase()})}
function db(a){return a.replace(/(^|[\s]+)([a-z])/g,function(b,c,d){return c+d.toUpperCase()})};function eb(){return B("iPhone")&&!B("iPod")&&!B("iPad")}function fb(){return eb()||B("iPad")||B("iPod")};function gb(a){gb[" "](a);return a}gb[" "]=aa;function hb(a,b){var c=ib;return Object.prototype.hasOwnProperty.call(c,a)?c[a]:c[a]=b(a)};var jb=B("Opera"),C=B("Trident")||B("MSIE"),kb=B("Edge"),lb=kb||C,mb=B("Gecko")&&!(-1!=A.toLowerCase().indexOf("webkit")&&!B("Edge"))&&!(B("Trident")||B("MSIE"))&&!B("Edge"),nb=-1!=A.toLowerCase().indexOf("webkit")&&!B("Edge"),ob=B("Macintosh"),pb=B("Windows"),qb=B("Android"),rb=eb(),sb=B("iPad"),tb=B("iPod"),ub=fb();function vb(){var a=n.document;return a?a.documentMode:void 0}var wb;
a:{var xb="",yb=function(){var a=A;if(mb)return/rv:([^\);]+)(\)|;)/.exec(a);if(kb)return/Edge\/([\d\.]+)/.exec(a);if(C)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(nb)return/WebKit\/(\S+)/.exec(a);if(jb)return/(?:Version)[ \/]?(\S+)/.exec(a)}();yb&&(xb=yb?yb[1]:"");if(C){var zb=vb();if(null!=zb&&zb>parseFloat(xb)){wb=String(zb);break a}}wb=xb}var ib={};function Ab(a){return hb(a,function(){return 0<=Fa(wb,a)})}var Bb;Bb=n.document&&C?vb():void 0;function Cb(a,b){this.width=a;this.height=b}l=Cb.prototype;l.toString=function(){return"("+this.width+" x "+this.height+")"};l.aspectRatio=function(){return this.width/this.height};l.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};l.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};l.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};
l.scale=function(a,b){this.width*=a;this.height*="number"===typeof b?b:a;return this};var Db=!C||9<=Number(Bb),Eb=!mb&&!C||C&&9<=Number(Bb)||mb&&Ab("1.9.1");function Fb(a,b){na(b,function(c,d){c&&"object"==typeof c&&c.wa&&(c=c.va());"style"==d?a.style.cssText=c:"class"==d?a.className=c:"for"==d?a.htmlFor=c:Gb.hasOwnProperty(d)?a.setAttribute(Gb[d],c):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,c):a[d]=c})}
var Gb={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function Hb(a,b,c){var d=arguments,e=document,f=String(d[0]),g=d[1];if(!Db&&g&&(g.name||g.type)){f=["<",f];g.name&&f.push(' name="',Ya(g.name),'"');if(g.type){f.push(' type="',Ya(g.type),'"');var h={};pa(h,g);delete h.type;g=h}f.push(">");f=f.join("")}f=D(e,f);g&&("string"===typeof g?f.className=g:p(g)?f.className=g.join(" "):Fb(f,g));2<d.length&&Ib(e,f,d);return f}
function Ib(a,b,c){function d(h){h&&b.appendChild("string"===typeof h?a.createTextNode(h):h)}for(var e=2;e<c.length;e++){var f=c[e];if(!ca(f)||q(f)&&0<f.nodeType)d(f);else{a:{if(f&&"number"==typeof f.length){if(q(f)){var g="function"==typeof f.item||"string"==typeof f.item;break a}if("function"==ba(f)){g="function"==typeof f.item;break a}}g=!1}v(g?va(f):f,d)}}}function D(a,b){b=String(b);"application/xhtml+xml"===a.contentType&&(b=b.toLowerCase());return a.createElement(b)}
function Jb(a,b){a.appendChild(b)}function Kb(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function Lb(a,b){var c=b.parentNode;c&&c.replaceChild(a,b)}function Mb(a){return Eb&&void 0!=a.children?a.children:ra(a.childNodes,function(b){return 1==b.nodeType})}function Nb(a){return 9==a.nodeType?a:a.ownerDocument||a.document}
function Ob(a,b){if("textContent"in a)a.textContent=b;else if(3==a.nodeType)a.data=String(b);else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=String(b)}else{for(var c;c=a.firstChild;)a.removeChild(c);a.appendChild(Nb(a).createTextNode(String(b)))}}function Pb(a){this.c=a||n.document||document};function Qb(a,b){if("string"===typeof b)(b=Rb(a,b))&&(a.style[b]=void 0);else for(var c in b){var d=a,e=b[c],f=Rb(d,c);f&&(d.style[f]=e)}}var Sb={};function Rb(a,b){var c=Sb[b];if(!c){var d=cb(b);c=d;void 0===a.style[d]&&(d=(nb?"Webkit":mb?"Moz":C?"ms":jb?"O":null)+db(d),void 0!==a.style[d]&&(c=d));Sb[b]=c}return c}
function Tb(a,b){a:{var c=Nb(a);if(c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,null))){c=c[b]||c.getPropertyValue(b)||"";break a}c=""}return c||(a.currentStyle?a.currentStyle[b]:null)||a.style&&a.style[b]}
function Ub(a){try{var b=a.getBoundingClientRect()}catch(c){return{left:0,top:0,right:0,bottom:0}}C&&a.ownerDocument.body&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function Vb(a){var b=Nb(a),c=new z(0,0);var d=b?Nb(b):document;d=!C||9<=Number(Bb)||"CSS1Compat"==(d?new Pb(Nb(d)):ja||(ja=new Pb)).c.compatMode?d.documentElement:d.body;if(a==d)return c;a=Ub(a);d=(b?new Pb(Nb(b)):ja||(ja=new Pb)).c;b=d.scrollingElement?d.scrollingElement:nb||"CSS1Compat"!=d.compatMode?d.body||d.documentElement:d.documentElement;d=d.parentWindow||d.defaultView;b=C&&Ab("10")&&d.pageYOffset!=b.scrollTop?new z(b.scrollLeft,b.scrollTop):new z(d.pageXOffset||b.scrollLeft,d.pageYOffset||
b.scrollTop);c.x=a.left+b.x;c.y=a.top+b.y;return c}function Wb(a){"number"==typeof a&&(a+="px");return a}function Xb(a){var b=Yb;if("none"!=Tb(a,"display"))return b(a);var c=a.style,d=c.display,e=c.visibility,f=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";a=b(a);c.display=d;c.position=f;c.visibility=e;return a}
function Yb(a){var b=a.offsetWidth,c=a.offsetHeight,d=nb&&!b&&!c;return(void 0===b||d)&&a.getBoundingClientRect?(a=Ub(a),new Cb(a.right-a.left,a.bottom-a.top)):new Cb(b,c)}function Zb(a){return new Cb(a.offsetWidth,a.offsetHeight)};function E(a){if($b(a)){var b=Hb("SPAN");Ob(b,a);return b}a.tag=a.tag||"DIV";var c=Hb(a.tag),d={id:a.id,"class":a.u,type:a.type,src:a.src,href:a.href,title:a.title,name:a.name,target:a.target,checked:a.checked,value:a.value},e={},f=!1;for(b in d)void 0!==d[b]&&(e[b]=d[b],f=!0);if(a.Ca)for(b in a.Ca)e[b]=a.Ca[b],f=!0;f&&Fb(c,e);a.La&&(c.innerHTML=a.La);a.text&&Ob(c,a.text);if(a.V)for(b in a.V)c.style[b]=a.V[b];if(a.children)for(b=0;b<a.children.length;b++)a.children[b]&&Jb(c,E(a.children[b]));a.create&&
a.create(c);a.click&&G(c,ac,function(g){a.click(g,c)});a.R&&G(c,bc,function(g){a.R(g,c)});return c};var cc=Qa(),dc=eb()||B("iPod"),ec=B("iPad"),fc=B("Android")&&!(Ra()||Qa()||B("Opera")||B("Silk")),gc=Ra(),hc=B("Safari")&&!(Ra()||B("Coast")||B("Opera")||B("Edge")||B("Edg/")||B("OPR")||Qa()||B("Silk")||B("Android"))&&!fb();var ic=function(){if(pb){var a=/Windows NT ([0-9.]+)/;return(a=a.exec(A))?a[1]:"0"}return ob?(a=/10[_.][0-9_.]+/,(a=a.exec(A))?a[0].replace(/_/g,"."):"10"):qb?(a=/Android\s+([^\);]+)(\)|;)/,(a=a.exec(A))?a[1]:""):rb||sb||tb?(a=/(?:iPhone|CPU)\s+OS\s+(\S+)/,(a=a.exec(A))?a[1].replace(/_/g,"."):""):""}();function kc(a){return(a=a.exec(A))?a[1]:""}var lc=function(){if(cc)return kc(/Firefox\/([0-9.]+)/);if(C||kb||jb)return wb;if(gc)return fb()?kc(/CriOS\/([0-9.]+)/):kc(/Chrome\/([0-9.]+)/);if(hc&&!fb())return kc(/Version\/([0-9.]+)/);if(dc||ec){var a=/Version\/(\S+).*Mobile\/(\S+)/.exec(A);if(a)return a[1]+"."+a[2]}else if(fc)return(a=kc(/Android\s+([0-9.]+)/))?a:kc(/Version\/([0-9.]+)/);return""}();var mc={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function nc(a){var b={};a=String(a);var c="#"==a.charAt(0)?a:"#"+a;if(oc.test(c))return b.M=pc(c),b.type="hex",b;a:{var d=a.match(qc);if(d){c=Number(d[1]);var e=Number(d[2]);d=Number(d[3]);if(0<=c&&255>=c&&0<=e&&255>=e&&0<=d&&255>=d){c=[c,e,d];break a}}c=[]}if(c.length)return b.M=rc(c),b.type="rgb",b;if(mc&&(c=mc[a.toLowerCase()]))return b.M=c,b.type="named",b;throw Error(a+" is not a valid color string");}var sc=/#(.)(.)(.)/;
function pc(a){if(!oc.test(a))throw Error("'"+a+"' is not a valid hex color");4==a.length&&(a=a.replace(sc,"#$1$1$2$2$3$3"));return a.toLowerCase()}function tc(a,b,c){a=Number(a);b=Number(b);c=Number(c);if(a!=(a&255)||b!=(b&255)||c!=(c&255))throw Error('"('+a+","+b+","+c+'") is not a valid RGB color');b=a<<16|b<<8|c;return 16>a?"#"+(16777216|b).toString(16).substr(1):"#"+b.toString(16)}function rc(a){return tc(a[0],a[1],a[2])}
function uc(a,b,c){0>c?c+=1:1<c&&--c;return 1>6*c?a+6*(b-a)*c:1>2*c?b:2>3*c?a+(b-a)*(2/3-c)*6:a}function vc(a,b,c){a/=360;if(0==b)c=b=a=255*c;else{var d=.5>c?c*(1+b):c+b-b*c;var e=2*c-d;c=255*uc(e,d,a+1/3);b=255*uc(e,d,a);a=255*uc(e,d,a-1/3)}return[Math.round(c),Math.round(b),Math.round(a)]}var oc=/^#(?:[0-9a-f]{3}){1,2}$/i,qc=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;function wc(a){return 1==a.length?"0"+a:a}
function xc(a){for(var b=[[0,0,0],[255,255,255]],c=[],d=0;d<b.length;d++)c.push({color:b[d],Fa:Math.abs(yc(b[d])-yc(a))+zc(b[d],a)});c.sort(function(e,f){return f.Fa-e.Fa});return c[0].color}function yc(a){return Math.round((299*a[0]+587*a[1]+114*a[2])/1E3)}function zc(a,b){return Math.abs(a[0]-b[0])+Math.abs(a[1]-b[1])+Math.abs(a[2]-b[2])};function Ac(a){var b={};a=String(a);var c="#"==a.charAt(0)?a:"#"+a;if(Bc.test(c))return b.M=Cc(c),b.type="hex",b;a:{var d=a.match(Dc);if(d){c=Number(d[1]);var e=Number(d[2]),f=Number(d[3]);d=Number(d[4]);if(0<=c&&255>=c&&0<=e&&255>=e&&0<=f&&255>=f&&0<=d&&1>=d){c=[c,e,f,d];break a}}c=[]}if(c.length)return b.M=Ec(c),b.type="rgba",b;a:{if(d=a.match(Fc))if(c=Number(d[1]),e=Number(d[2]),f=Number(d[3]),d=Number(d[4]),0<=c&&360>=c&&0<=e&&100>=e&&0<=f&&100>=f&&0<=d&&1>=d){f=[c,e,f,d];break a}f=[]}if(f.length){a=
f[0];c=f[1];e=f[2];f=f[3];d=Math.floor(255*f);if(isNaN(d)||0>d||255<d)throw Error('"('+a+","+c+","+e+","+f+'") is not a valid HSLA color');f=wc(d.toString(16));a=rc(vc(a,c/100,e/100))+f;b.M=a;b.type="hsla";return b}throw Error(a+" is not a valid color string");}var Gc=/#(.)(.)(.)(.)/;function Cc(a){if(!Bc.test(a))throw Error("'"+a+"' is not a valid alpha hex color");5==a.length&&(a=a.replace(Gc,"#$1$1$2$2$3$3$4$4"));return a.toLowerCase()}
function Hc(a){a=Cc(a);return[parseInt(a.substr(1,2),16),parseInt(a.substr(3,2),16),parseInt(a.substr(5,2),16),parseInt(a.substr(7,2),16)/255]}function Ec(a){var b=a[0],c=a[1],d=a[2];a=a[3];var e=Math.floor(255*a);if(isNaN(e)||0>e||255<e)throw Error('"('+b+","+c+","+d+","+a+'") is not a valid RGBA color');a=wc(e.toString(16));return tc(b,c,d)+a}
var Bc=/^#(?:[0-9a-f]{4}){1,2}$/i,Ic=/(0|[1-9]\d{0,2})/,Jc=/(0|1|0\.\d{1,10}|1\.0{1,10})/,Dc=new RegExp("^\\s*(?:rgba)?\\("+Ic.source+",\\s*"+Ic.source+",\\s*"+Ic.source+",\\s*"+Jc.source+"\\)\\s*$","i"),Fc=new RegExp("^\\s*(?:hsla)?\\("+Ic.source+",\\s*"+Ic.source+"%,\\s*"+Ic.source+"%,\\s*"+Jc.source+"\\)\\s*$","i");function Kc(a){var b=a.slice(0);b[3]=Math.round(1E3*a[3])/1E3;return"rgba("+b.join(",")+")"};function Lc(a,b){b=b||"#ffffff";a=a||b;if(!$b(a))throw Error(a+" is not a valid 6-hex color string");7<a.length&&"#"==a[0]&&(a=a.substr(0,7));7<b.length&&"#"==b[0]&&(b=b.substr(0,7));try{return nc(a)}catch(c){return Lc(b,"#ffffff")}}function Mc(a,b){b=b||"#ffffff";a=a||b;if(!$b(a))throw Error(a+" is not a valid 8-hex color string");try{return Ac(a)}catch(d){try{var c=Lc(a,b).M;return Mc(c+"ff",b+"ff")}catch(e){return Mc(b,"#ffffffff")}}}
function Nc(a){var b=.5;a=nc(a).M;a=pc(a);a=parseInt(a.substr(1),16);a=xc([a>>16,a>>8&255,a&255]);if(1>b){a.push(b);b=a[0];var c=a[1],d=a[2];a=a[3];if(isNaN(b)||0>b||255<b||isNaN(c)||0>c||255<c||isNaN(d)||0>d||255<d||isNaN(a)||0>a||1<a)throw Error('"('+b+","+c+","+d+","+a+')" is not a valid RGBA color');return Kc([b,c,d,a])}return rc(a)}
function Oc(a){this.Ma=!0;this.o=this.c=this.f=this.j=0;a&&($b(a)?("transparent"==a.toLowerCase()&&(a="#0000"),Pc(this,a)):p(a)&&3<=a.length?Qc(this,[a[0],a[1],a[2],H(a[3])?a[3]:1]):a.Ma?(this.j=a.j,this.f=a.f,this.c=a.c,this.o=a.o):q(a)&&("h"in a&&"s"in a&&"v"in a?Rc(this,[a.h,a.s,a.v,H(a.a)?a.a:1]):"h"in a&&"s"in a&&"l"in a?Sc(this,[a.h,a.s,a.l,H(a.a)?a.a:1]):"r"in a&&"g"in a&&"b"in a&&Qc(this,[a.r,a.g,a.b,H(a.a)?a.a:1])))}Oc.prototype.M=function(a){return void 0===a?rc(Tc(this)):Pc(this,a)};
function Pc(a,b){if(void 0===b)return Ec(Qc(a));b=Hc(Mc(b).M);a.j=b[0];a.f=b[1];a.c=b[2];a.o=b[3];return a}function Tc(a){return[a.j,a.f,a.c]}function Qc(a,b){if(void 0===b)return[a.j,a.f,a.c,a.o];a.j=y(Math.round(b[0]),0,255);a.f=y(Math.round(b[1]),0,255);a.c=y(Math.round(b[2]),0,255);a.o=y(H(b[3])?b[3]:1,0,1);return a}
function Sc(a,b){if(void 0===b){var c=a.j/255;b=a.f/255;a=a.c/255;var d=Math.max(c,b,a),e=Math.min(c,b,a),f=0,g=0,h=.5*(d+e);d!=e&&(d==c?f=60*(b-a)/(d-e):d==b?f=60*(a-c)/(d-e)+120:d==a&&(f=60*(c-b)/(d-e)+240),g=0<h&&.5>=h?(d-e)/(2*h):(d-e)/(2-2*h));c=[Math.round(f+360)%360,g,h]}else void 0===b?c=Sc(a).concat([a.o]):(c=y(H(b[3])?b[3]:1,0,1),b=vc(y(Math.round(360+b[0])%360,0,360),y(b[1],0,1),y(b[2],0,1)),a.j=b[0],a.f=b[1],a.c=b[2],a.o=c,c=a);return c}
function Rc(a,b){if(void 0===b)Tc(a),Sc(a);else{var c=y(H(b[3])?b[3]:1,0,1),d=y(Math.round(360+b[0])%360,0,360);var e=y(b[1],0,1);b=y(Math.round(255*y(b[2],0,1)),0,255);var f=0,g=0,h=0;if(0==e)h=g=f=b;else{var k=Math.floor(d/60),m=d/60-k;d=b*(1-e);var t=b*(1-e*m);e=b*(1-e*(1-m));switch(k){case 1:f=t;g=b;h=d;break;case 2:f=d;g=b;h=e;break;case 3:f=d;g=t;h=b;break;case 4:f=e;g=d;h=b;break;case 5:f=b;g=d;h=t;break;case 6:case 0:f=b,g=e,h=d}}e=[Math.round(f),Math.round(g),Math.round(h)];a.j=e[0];a.f=
e[1];a.c=e[2];a.o=c}};function Uc(){var a=this;this.B=!1;this.o=null;this.F=E({u:"callout hidden",children:[{u:"callout-bubble",create:function(b){a.J=b},children:[{u:"simple-color-picker",children:[{u:"preview-swatch",create:function(b){a.C=b}},{u:"input-container",children:[{tag:"input",type:"text",u:"box-sizing-border",create:function(b){a.P=b;G(b,Vc,function(){a.B=!0});G(b,Wc,function(){a.B=!1});G(b,Xc,function(c){c.stopPropagation()})},R:function(b,c){try{var d=new Oc(Lc(c.value).M);Yc(a,d)}catch(e){Zc(a,a.f)}}}]},
{u:"button-container",children:[{tag:"button",text:"Done",click:function(){a.c&&0==a.c(a.f)||$c(a)}}]},{u:"spacer"},{u:"swatch-container",create:function(b){a.o=b}}]}]},{u:"callout-pointer-border"},{u:"callout-pointer"}]});G(this.J,ad,function(b){b.stopPropagation()});G(this.J,bd,function(){cd(a,a.j);Zc(a,a.f)});this.G={};this.c=this.f=this.j=null;dd(this);I(ed,function(){$c(a)})}
function Zc(a,b){b&&0<Qc(b)[3]?(a.C.classList.remove("transparent"),a.C.style.backgroundColor=b.M(),a.B||(a.P.value=b.M())):(ia.u.add(a.C,"transparent"),a.B||(a.P.value="transparent"))}function cd(a,b){v(a.o.getElementsByClassName("selected"),function(c){c.classList.remove("selected")});b&&b.classList.add("selected")}function Yc(a,b){b?(a.j=a.G[b.M().toLowerCase()]||null,a.f=new Oc(b.M()),a.j&&cd(a,a.j),Zc(a,b)):(a.j=null,a.f=null)}
function dd(a){var b;a.G={};var c=new Oc;for(b=0;12>b;b++)Rc(c,[0,0,(11-b)/11]),fd(a,Tc(c));for(var d=0;9>d;d++)for(b=0;360>b;b+=30)Sc(c,[b,1,(9-d)/10]),fd(a,Tc(c));b=E({u:"clear"});a.o.appendChild(b)}
function fd(a,b){Jb(a.o,E({u:"swatch"+(b?"":" transparent"),V:{backgroundColor:b?"rgb("+Math.round(b[0])+","+Math.round(b[1])+","+Math.round(b[2])+")":"transparent"},create:function(c){var d=null;b&&(d=new Oc(b),a.G[d.M().toLowerCase()]=c);G(c,gd,function(){cd(a,c);Zc(a,d)});G(c,ac,function(){a.c&&!1===a.c(d)||$c(a)})}}))}function $c(a){a.F.style.display="none"};function hd(){var a=this;this.f=null;this.F=E({u:"text-area-container",children:[{u:"overlay"},{u:"wrapper",children:[{u:"heading",text:J("Edit Text Content")},{tag:"textarea",create:function(b){a.f=b;G(b,Xc,function(c){c.stopPropagation()})}},{tag:"button",u:"cancel",text:J("Cancel"),click:function(){a.c=null;a.F.style.display="none"}},{tag:"button",u:"save",text:J("Save"),click:function(){a.save()}}]}]});this.c=null}
hd.prototype.save=function(){this.c&&!1===this.c(this.f.value)||(this.c=null,this.F.style.display="none")};function id(a,b,c){L.c(ed);a.c=b;a.f.value=c||"";a.F.style.display="block";setTimeout(r(function(){this.f.select&&this.f.select()},a),250)};function jd(a,b,c,d){this.x=a;this.y=b;this.A=c;this.D=d}function kd(a,b,c,d){if(2==arguments.length)return Math.sqrt(a*a+b*b);var e=c-a,f=d-b;return Math.sqrt(e*e+f*f)}function ld(a,b,c,d,e,f,g){var h=0,k=a,m=b;g=g||6;for(var t=1;t<=g;t++){var w=t/g;var Q=1-w;var x=Q*Q;Q*=2*w;var S=w*w;w=x*a+Q*c+S*e;x=x*b+Q*d+S*f;h+=kd(k,m,w,x);k=w;m=x}return h}function md(a,b,c,d,e,f,g,h){if(0==g)return nd(a,b,c,d,e,f,h);if(1==h)return od(a,b,c,d,e,f,g);a=nd(a,b,c,d,e,f,h);a.push(g/h);return od.apply(null,a)}
function nd(a,b,c,d,e,f,g){g=g||1;1!=g&&(e=c+(e-c)*g,f=d+(f-d)*g,c=a+(c-a)*g,d=b+(d-b)*g,e=c+(e-c)*g,f=d+(f-d)*g);return[a,b,c,d,e,f]}function od(a,b,c,d,e,f,g){g=g||1;1!=g&&(a+=(c-a)*g,b+=(d-b)*g,c+=(e-c)*g,d+=(f-d)*g,a+=(c-a)*g,b+=(d-b)*g);return[a,b,c,d,e,f]}
function pd(a,b,c){var d=(c.x-b.x)*(c.x-b.x)+(c.y-b.y)*(c.y-b.y),e=((a.x-b.x)*(c.x-b.x)+(a.y-b.y)*(c.y-b.y))/d;d=Math.abs(((b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y))/d)*Math.sqrt(d);0<=e&&1>=e?a=d:(b=(a.x-b.x)*(a.x-b.x)+(a.y-b.y)*(a.y-b.y),a=(a.x-c.x)*(a.x-c.x)+(a.y-c.y)*(a.y-c.y),a=b<a?Math.sqrt(b):Math.sqrt(a));return a};function qd(a){this.c=a;this.u={};a=this.c.className.split(" ");for(var b=0,c=a.length;b<c;b++)this.u[a[b]]=!0}function rd(a){var b=[],c;for(c in a.u)b.push(c);return b.join(" ")}function sd(a,b){b=b.split(" ");for(var c=0,d=b.length;c<d;c++)a.u[b[c]]=!0;a.c.className=rd(a)}function td(a,b){b=b.split(" ");for(var c=0,d=b.length;c<d;c++)delete a.u[b[c]];a.c.className=rd(a)};function ud(a,b){function c(){if(!d.c){var e=parseFloat(d.input.value);H(e)&&(e/=d.W);a:{e=[e,d.Y,d.value];for(var f=e.length,g=0;g<f;g++)if(e[g]||0===e[g]||""===e[g]||!1===e[g]){e=e[g];break a}e=null}vd(d,e)}}a=a||{};var d=this;this.C=this.J=this.input=null;this.F=E({u:"spinner",V:a.V||null,children:[{u:"spinner-textbox",children:[{tag:"input",type:"text",create:function(e){d.input=e}}]},{u:"spinner-buttons",children:[{u:"spinner-up",create:function(e){d.J=e},children:[{u:"icon-13 icon-13-spinner-arrows"}]},
{u:"spinner-down",create:function(e){d.C=e},children:[{u:"icon-13 icon-13-spinner-arrows"}]}]}]});this.o=new qd(this.F);this.c=a.disabled||!1;this.min=a.min||0;this.max=void 0===a.max?100:a.max;this.step=a.step||1;this.round=a.round||0;this.loop=!!a.loop;this.Ba=a.Ba||"";this.Y=a.Y||0;this.W=a.W||1;this.ra=void 0===a.ra?this.round:a.ra;this.value=0;this.j=[];this.G=[];this.B=[];vd(this,a.value||this.Y||0,!0);a.R&&this.j.push(a.R);a.focus&&this.G.push(a.focus);a.blur&&this.B.push(a.blur);b&&this.ba(b,
50);G(this.input,bc,function(){c()});G(this.input,Xc,function(e){if(!d.c){var f=e.keyCode;38==f?(wd(d),e.preventDefault()):40==f?(xd(d),e.preventDefault()):13==f&&(c(),d.input.blur(),e.preventDefault());e.stopPropagation()}});G(this.input,Vc,function(){yd(d)});G(this.input,Wc,function(){zd(d)});G(this.J,ac,function(){d.c||wd(d)});G(this.C,ac,function(){d.c||xd(d)});this.c&&(this.c=!1,this.$())}
function wd(a){H(a.value)||null==a.f||(a.value=a.f);var b=(Math.round(a.W*a.value/a.step)+1)*a.step/a.W;a.loop&&b>a.max&&(b=a.min+(b-(a.max+1)));vd(a,b)}function xd(a){H(a.value)||null==a.f||(a.value=a.f);var b=(Math.round(a.W*a.value/a.step)-1)*a.step/a.W;a.loop&&b<a.min&&(b=a.max+1-(a.min-b));vd(a,b)}
function vd(a,b,c){var d=!1;if(b!==a.value||c)b=parseFloat(b),isNaN(b)?null!==a.Y&&(a.value=a.Y):(a.value=b>a.max?a.max:b<a.min?a.min:b,a.value=1*a.value.toFixed(a.round),a.f=a.value),a.S(!!c),d=!0;if(!c||d||""===a.input.value)a.input.value=$b(a.value)?a.value:(a.value*a.W).toFixed(a.ra||0).replace(/^([^\.]*)$/,"$1.").replace(/\.?0*$/,"")+a.Ba}l=ud.prototype;l.S=function(a){var b=this;v(this.j,function(c){c.call(b,b.value,!!a)})};
function yd(a){setTimeout(function(){a.input.select()},10);v(a.G,function(b){b.call(a,a.value)})}function zd(a){v(a.B,function(b){b.call(a)})}l.ba=function(a,b){this.F.style.width=b?b+"px":"auto";a.appendChild(this.F)};l.Aa=function(a){this.c||vd(this,a,!0)};l.reset=function(){null!==this.Y&&vd(this,this.Y,!0);return this};l.focus=function(){this.input.focus();return this};l.blur=function(){this.input.blur();return this};l.pa=function(){this.c&&(td(this.o,"disabled"),this.c=this.input.disabled=!1)};
l.$=function(){this.c||(sd(this.o,"disabled"),this.c=this.input.disabled=!0)};function Ad(a,b){var c={};this.o=a;this.F=E({u:"button-bar"+(c.u?" "+c.u:""),V:c.V||null});this.j=new qd(this.F);this.c=c.disabled||!1;this.value=[];this.f=[];c.R&&this.f.push(c.R);b&&this.ba(b,void 0);Bd(this);this.c&&this.$()}l=Ad.prototype;l.S=function(a){var b=this;v(this.f,function(c){c.call(b,b.value,!!a)})};l.ba=function(a,b){this.F.style.width=b?b+"px":"auto";a.appendChild(this.F)};
function Bd(a){a.value=[];v(a.o,function(b){var c=b.selected&&b.selected(),d=a.c||b.disabled&&b.disabled();c&&(b.value||0===b.value||!1===b.value)&&a.value.push(b.value);Jb(a.F,E({u:"button-bar-item"+(c?" selected":"")+(d&&!a.c?" disabled":""),title:b.T||null,click:function(){d=a.c||b.disabled&&b.disabled();d||(b.action(),a.refresh(!0))},children:[{u:"icon-13 icon-13-"+b.icon}]}))})}
l.refresh=function(a){var b=this;this.value=[];v(this.o,function(c,d){var e=c.selected&&c.selected(),f=b.c||c.disabled&&c.disabled();e&&(c.value||0===c.value||!1===c.value)&&b.value.push(c.value);Mb(b.F)[d].className="button-bar-item"+(e?" selected":"")+(f&&!b.c?" disabled":"")});this.S(!a||!1);return this};l.pa=function(){this.c&&(td(this.j,"disabled"),this.c=!1);this.refresh()};l.$=function(){this.c||(sd(this.j,"disabled"),this.c=!0);this.refresh()};function Cd(a,b){a=a||{};var c=this;this.j=this.B=null;this.F=E({u:"color-well",children:[{u:"color-well-wrapper",children:[{u:"swatch-container",click:function(d,e){c.c||(d=Vb(e),e=Xb(e),L.c(Dd,d.x+e.width/2,d.y+e.height+2,function(f){c.value=f;Ed(c);c.S(!1)},c.value||null))},children:[{u:"swatch",create:function(d){c.B=d},children:[{tag:"canvas",V:{position:"absolute"},create:function(d){c.j=d}}]},{u:"border"}]}]}]});this.f=new qd(this.F);this.c=a.disabled||!1;this.value=a.value||new Oc("#fff");
this.o=[];a.R&&this.o.push(a.R);b&&this.ba(b,void 0);this.c&&this.$()}function Ed(a){if(!a.C){var b=Xb(a.B);if(0==b.width)return;a.j.width=b.width;a.j.height=b.height;a.C=!0}b=a.j.getContext("2d");var c=a.value;td(a.f,"no-fill");a.c&&(c=new Oc("#ccccccff"));c||sd(a.f,"no-fill");a=b.canvas.width;var d=b.canvas.height;b.clearRect(0,0,a,d);c&&(b.save(),b.fillStyle=Kc(Hc(Pc(c))),b.fillRect(0,0,a,d),b.restore())}l=Cd.prototype;l.S=function(a){var b=this;v(this.o,function(c){c.call(b,b.value,!!a)})};
l.ba=function(a,b){this.F.style.width=b?b+"px":"";a.appendChild(this.F)};l.Aa=function(a){this.value=new Oc(a);Ed(this);this.S(!0)};l.pa=function(){this.c&&(td(this.f,"disabled"),this.c=!1,Ed(this))};l.$=function(){this.c||(sd(this.f,"disabled"),this.c=!0,Ed(this))};l.reset=function(){this.value=null;Ed(this);this.S(!0);return this};function Fd(a,b){if(null==a)return null;null==b&&(b=0);if(100<b)return null;var c={};if("object"==typeof a){"undefined"!=typeof a.length&&(c=[]);for(var d in a){var e=typeof a[d];"object"==e?c[d]=a[d]instanceof HTMLElement?a[d]:Fd(a[d],b+1):"string"==e?c[d]=a[d]:"number"==e?c[d]=a[d]:"function"==e?c[d]=a[d]:"boolean"==e?1==a[d]?c[d]=!0:c[d]=!1:"undefined"==e&&(c[d]=void 0)}}return c}
function Gd(a,b){if("object"==typeof a&&"object"==typeof b){if(null==a&&null==b)return!0;if(p(a)&&p(b)){if(a.length!=b.length)return!1;for(var c=0;c<a.length;c++)if(!Gd(a[c],b[c]))return!1;return!0}if(q(a)&&q(b)){for(c in a)if(!(c in(a.__proto__||a.constructor)||"__proto__"==c||c in b&&Gd(a[c],b[c])))return!1;for(c in b)if(!(c in(b.__proto__||b.constructor)||"__proto__"==c||c in a))return!1;return!0}return!1}return H(a)&&H(b)?1E-9>Math.abs(a-b):null==a&&null==b?!0:a===b};function M(a,b){this.type=a;this.H=b;this.j=null;this.f=this.c=!1}function Hd(a){var b=new M(a.type,Fd(a.H));switch(a.type){case 1:b.type=5;break;case 2:b.type=6;break;case 3:b.type=7;break;case 4:b.H=Fd(a.j);break;case 5:b.type=1;break;case 6:b.type=2;break;case 7:b.type=3;break;default:return null}return b};var Id=null;function Jd(a,b){var c=Id;if(c){var d=Kd(c);0<d.length?v(d,function(e){void 0!==e.m[a]&&(e={id:e.id},e[a]=b,N(c,new M(4,e)))}):c.i.m[a]=b}}function Ld(a){var b=Id;b&&(b.o++,v(a,function(c){Jd(c[0],c[1])}),Md(b))}function O(a){var b=Id;if(b){var c=Kd(b),d;0<c.length?sa(c,function(e){return void 0!==e.m[a]?(d=e.m[a],!0):!1}):d=b.i.m[a];return d}}function P(a,b){return function(c){void 0!==c&&void 0!==a[b]&&(a[b]=c);return a[b]}};function J(a){return Nd[a]?"en"!=Od?Nd[a][Od]||Nd[a].en||a:Nd[a].en||a:a}var Od="en",Nd={};function Pd(a){var b=this;this.o=a;this.F=Hb("DIV","option-bar");this.viewport=Hb("DIV","fullsize");this.F.appendChild(this.viewport);this.f=[];Qd(this,this.F);this.c=this.mode=null;I(R,function(c,d){b.mode=c;b.c=d;b.refresh()})}function Rd(a){var b=E({u:"option-bar-input"});a.appendChild(b);return b}function Sd(a){var b=E({u:"option-bar-divider"});a.appendChild(b)}function Td(a){var b=E({u:"option-bar-label-left",text:"Scale:",children:null});a.appendChild(b)}
Pd.prototype.j=function(a,b){b=O(b);void 0===b?(a.Aa(null),a.$()):(a.pa(),a.Aa(b))};
function Qd(a,b){function c(){return!H(O("fl"))}function d(){return!$b(O("ta"))}function e(K,Z,F,jc){return new Ad([{icon:K,action:function(){L.c(R,Z,jc)},T:J(F),selected:function(){return a.mode==Z&&(void 0===jc||jc==a.c)},disabled:function(){return!1}}],Rd(b))}function f(K){var Z=[];v(K.buttons,function(F){K.O?(F.action=function(){Jd(K.O,F.la)},F.selected=function(){return O(K.O)==F.la},F.disabled=function(){return void 0===O(K.O)}):F.O&&(F.action=function(){Jd(F.O,!O(F.O))},F.selected=function(){return!!O(F.O)},
F.disabled=function(){return void 0===O(F.O)});Z.push(F)});return Z}var g=e("tool-select",Ud,"Select Tool"),h=e("tool-line",Vd,"Line Tool"),k=e("tool-anchor",T,"Anchor Tool",Wd),m=e("tool-piton",T,"Piton Tool",Xd),t=e("tool-rappel",T,"Rappel Tool",Yd),w=e("tool-belay",T,"Belay Tool",Zd),Q=e("tool-text",$d,"Text Tool");Sd(b);var x=new Cd({R:function(K,Z){Z||Jd("ic",K.M())}},Rd(b));x.refresh=r(a.j,a,x,"ic");Sd(b);Td(b);var S=a.o.ja||1;S=new ud({min:.25*S,max:8*S,step:10,round:2,width:60,value:1,W:100/
S,Ba:"%",R:function(K,Z){Z||Jd("is",K)}},Rd(b));S.refresh=r(a.j,a,S,"is");Sd(b);var Kf=new Ad(f({buttons:[{icon:"text-align-l",la:"l",T:J("Left Align"),selected:function(){return"l"==O("ta")},disabled:d},{icon:"text-align-c",la:"c",T:J("Center Align"),selected:function(){return"c"==O("ta")},disabled:d},{icon:"text-align-r",la:"r",T:J("Right Align"),selected:function(){return"r"==O("ta")},disabled:d}],O:"ta"}),Rd(b)),Lf=new Ad(f({buttons:[{icon:"text-bg",O:"tb",T:J("Toggle Text Background")}]}),Rd(b));
Sd(b);var Mf=new Ad([{icon:"line-solid",action:function(){Jd("fl",0)},T:J("Solid Line"),selected:function(){return 0===O("fl")},disabled:c},{icon:"line-dashed",action:function(){Ld([["fl",10],["nl",10]])},T:J("Dashed Line"),selected:function(){return 2<O("nl")},disabled:c},{icon:"line-dotted",action:function(){Ld([["fl",8],["nl",.01]])},T:J("Dotted Line"),selected:function(){return 0<O("fl")&&2>=O("nl")},disabled:c}],Rd(b)),Nf=new Ad(f({buttons:[{icon:"line-curved",O:"lc",T:J("Toggle Line Curvature")}]}),
Rd(b)),Of=new Ad([{icon:"line-edit",action:function(){L.c(R,ae)},T:J("Edit Line Shape"),selected:function(){return a.mode==ae},disabled:c}],Rd(b)),Pf=[g,h,k,m,t,w,Q,x,S,Kf,Lf,Mf,Nf,Of];a.f.push(function(){v(Pf,function(K){K.refresh&&K.refresh()})})}Pd.prototype.refresh=function(){v(this.f,function(a){a()})};function be(a,b){var c=this;this.J=a;this.P=b;this.f=E({id:"betacreator",children:[{u:"fullsize viewport",create:function(d){c.viewport=d}},{u:"fullsize hitdiv",create:function(d){c.j=d}},{u:"bc-gui",create:function(d){c.G=d}},{create:function(d){c.aa=d}}]});this.c=this.J.c;this.viewport.appendChild(this.c.view.F);this.B=new Pd(this.P);this.G.appendChild(this.B.F);this.o=new Uc;this.G.appendChild(this.o.F);I(Dd,function(d,e,f,g){var h=c.o;L.c(ed);h.c=f;Yc(h,g);h.F.style.display="block";if(f=h.F.offsetParent)if(g=
"HTML"==f.tagName||"BODY"==f.tagName,!g||"static"!=Tb(f,"position")){var k=Vb(f);if(!g){g="rtl"==Tb(f,"direction");var m;if(m=g){if(m=hc)m=0<=Fa(lc,10);var t;if(t=ub)t=0<=Fa(ic,10);m=mb||m||t}g=m?-f.scrollLeft:!g||lb&&Ab("8")||"visible"==Tb(f,"overflowX")?f.scrollLeft:f.scrollWidth-f.clientWidth-f.scrollLeft;f=new z(g,f.scrollTop);k=new z(k.x-f.x,k.y-f.y)}}f=k||new z;h=h.F;k=d-f.x;k instanceof z?(d=k.x,e=k.y):(d=k,e-=f.y);h.style.left=Wb(d);h.style.top=Wb(e)});this.C=new hd;this.aa.appendChild(this.C.F);
I(ce,function(d,e){id(c.C,d,e)})}function de(a){ee(a);a=a.B;I(fe,r(a.refresh,a));I(ge,r(a.refresh,a));L.c(R,Ud)}
function ee(a){G(a.f,ad,function(){L.c(ed)});G(a.j,ad,function(b){var c=a.c;c.mode.Z(b,he(c,b))});G(a.j,ie,function(b){var c=a.c;c.mode.ca(he(c,b))});G(a.j,je,function(b){var c=a.c;c.mode.da(he(c,b))});G(a.j,ke,function(b){var c=a.c;c.mode.Da(he(c,b))});G(document,Xc,function(b){b.stopPropagation();if(!a.c.mode.oa(b)){var c=!1;switch(b.keyCode){case 65:L.c(R,T,Wd);break;case 66:L.c(R,T,Zd);break;case 76:L.c(R,Vd);break;case 80:L.c(R,T,Xd);break;case 82:L.c(R,T,Yd);break;case 84:L.c(R,$d);break;case 86:case 27:L.c(R,
Ud);break;case 89:if(b.ctrlKey||b.metaKey)c=!0,le(a.c);break;case 90:if(b.ctrlKey||b.metaKey)c=!0,b.shiftKey?le(a.c):me(a.c);break;case 8:case 46:c=!1;a.c.o++;v(Kd(a.c),function(d){if(d.G){c=!0;var e=ne(d.m);e.id=d.id;N(a.c,new M(5,e))}else d.C?(c=!0,e=oe(d.m),e.id=d.id,N(a.c,new M(6,e))):d.J&&(c=!0,e=pe(d.m),e.id=d.id,N(a.c,new M(7,e)))});Md(a.c);a.c.selected=null;L.c(fe);L.c(U);break;case 189:if(b.ctrlKey||b.metaKey)c=!0,qe(a.c);break;case 187:if(b.ctrlKey||b.metaKey)c=!0,re(a.c)}c&&b.preventDefault()}})}
;function se(a,b){this.j=a;this.o=b;this.f=0;this.c=null}se.prototype.get=function(){if(0<this.f){this.f--;var a=this.c;this.c=a.next;a.next=null}else a=this.j();return a};function te(){this.f=this.c=null}var ve=new se(function(){return new ue},function(a){a.reset()});te.prototype.add=function(a,b){var c=ve.get();c.set(a,b);this.f?this.f.next=c:this.c=c;this.f=c};te.prototype.remove=function(){var a=null;this.c&&(a=this.c,this.c=this.c.next,this.c||(this.f=null),a.next=null);return a};function ue(){this.next=this.f=this.c=null}ue.prototype.set=function(a,b){this.c=a;this.f=b;this.next=null};ue.prototype.reset=function(){this.next=this.f=this.c=null};function we(a){n.setTimeout(function(){throw a;},0)}var xe;
function ye(){var a=n.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!B("Presto")&&(a=function(){var e=D(document,"IFRAME");e.style.display="none";Xa(e);document.documentElement.appendChild(e);var f=e.contentWindow;e=f.document;e.open();e.write(Ua());e.close();var g="callImmediate"+Math.random(),h="file:"==f.location.protocol?"*":f.location.protocol+"//"+f.location.host;e=r(function(k){if(("*"==h||k.origin==h)&&k.data==g)this.port1.onmessage()},
this);f.addEventListener("message",e,!1);this.port1={};this.port2={postMessage:function(){f.postMessage(g,h)}}});if("undefined"!==typeof a&&!B("Trident")&&!B("MSIE")){var b=new a,c={},d=c;b.port1.onmessage=function(){if(void 0!==c.next){c=c.next;var e=c.Ea;c.Ea=null;e()}};return function(e){d.next={Ea:e};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in D(document,"SCRIPT")?function(e){var f=D(document,"SCRIPT");f.onreadystatechange=function(){f.onreadystatechange=
null;f.parentNode.removeChild(f);f=null;e();e=null};document.documentElement.appendChild(f)}:function(e){n.setTimeout(e,0)}};function ze(a){Ae||Be();Ce||(Ae(),Ce=!0);De.add(a,void 0)}var Ae;function Be(){if(n.Promise&&n.Promise.resolve){var a=n.Promise.resolve(void 0);Ae=function(){a.then(Ee)}}else Ae=function(){var b=Ee;"function"!=ba(n.setImmediate)||n.Window&&n.Window.prototype&&!B("Edge")&&n.Window.prototype.setImmediate==n.setImmediate?(xe||(xe=ye()),xe(b)):n.setImmediate(b)}}var Ce=!1,De=new te;
function Ee(){for(var a;a=De.remove();){try{a.c.call(a.f)}catch(c){we(c)}var b=ve;b.o(a);100>b.f&&(b.f++,a.next=b.c,b.c=a)}Ce=!1};function Fe(){0!=Ge&&(Object.prototype.hasOwnProperty.call(this,da)&&this[da]||(this[da]=++ea))}var Ge=0;function He(a){Fe.call(this);this.C=1;this.B=[];this.j=0;this.f=[];this.o={};this.G=!!a}u(He,Fe);function I(a,b,c){var d=L,e=d.o[a];e||(e=d.o[a]=[]);var f=d.C;d.f[f]=a;d.f[f+1]=b;d.f[f+2]=c;d.C=f+3;e.push(f)}
He.prototype.c=function(a,b){var c=this.o[a];if(c){for(var d=Array(arguments.length-1),e=1,f=arguments.length;e<f;e++)d[e-1]=arguments[e];if(this.G)for(e=0;e<c.length;e++){var g=c[e];Ie(this.f[g+1],this.f[g+2],d)}else{this.j++;try{for(e=0,f=c.length;e<f;e++)g=c[e],this.f[g+1].apply(this.f[g+2],d)}finally{if(this.j--,0<this.B.length&&0==this.j)for(;c=this.B.pop();)if(d=this.f[c])d=this.o[d],0!=this.j?(this.B.push(c),this.f[c+1]=aa):(d&&ua(d,c),delete this.f[c],delete this.f[c+1],delete this.f[c+2])}}}};
function Ie(a,b,c){ze(function(){a.apply(b,c)})};var Je="closure_listenable_"+(1E6*Math.random()|0),Ke=0;function Le(a,b,c,d,e){this.listener=a;this.proxy=null;this.src=b;this.type=c;this.capture=!!d;this.c=e;this.key=++Ke;this.fa=this.qa=!1}function Me(a){a.fa=!0;a.listener=null;a.proxy=null;a.src=null;a.c=null};function Ne(a){this.src=a;this.c={};this.f=0}Ne.prototype.add=function(a,b,c,d,e){var f=a.toString();a=this.c[f];a||(a=this.c[f]=[],this.f++);var g=Oe(a,b,d,e);-1<g?(b=a[g],c||(b.qa=!1)):(b=new Le(b,this.src,f,!!d,e),b.qa=c,a.push(b));return b};Ne.prototype.remove=function(a,b,c,d){a=a.toString();if(!(a in this.c))return!1;var e=this.c[a];b=Oe(e,b,c,d);return-1<b?(Me(e[b]),Array.prototype.splice.call(e,b,1),0==e.length&&(delete this.c[a],this.f--),!0):!1};
function Oe(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.fa&&f.listener==b&&f.capture==!!c&&f.c==d)return e}return-1};var Pe=!C||9<=Number(Bb),Qe=C&&!Ab("9"),Re=function(){if(!n.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});try{n.addEventListener("test",aa,b),n.removeEventListener("test",aa,b)}catch(c){}return a}();var ac="click",ke="dblclick",ad="mousedown",je="mouseup",gd="mouseover",bd="mouseout",ie="mousemove",Xc="keydown",Wc="blur",Vc="focus",bc="change";var Se=Object.freeze||function(a){return a};function Te(a,b){this.type=a;this.f=this.target=b;this.j=!1}Te.prototype.stopPropagation=function(){this.j=!0};Te.prototype.preventDefault=function(){};function Ue(a,b){Te.call(this,a?a.type:"");this.relatedTarget=this.f=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=0;this.key="";this.keyCode=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.pointerId=0;this.pointerType="";this.c=null;if(a){var c=this.type=a.type,d=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.f=b;if(b=a.relatedTarget){if(mb){a:{try{gb(b.nodeName);var e=!0;break a}catch(f){}e=
!1}e||(b=null)}}else c==gd?b=a.fromElement:c==bd&&(b=a.toElement);this.relatedTarget=b;d?(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0):(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0);this.button=a.button;this.keyCode=a.keyCode||0;this.key=a.key||"";this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;
this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.pointerId=a.pointerId||0;this.pointerType="string"===typeof a.pointerType?a.pointerType:Ve[a.pointerType]||"";this.c=a;a.defaultPrevented&&this.preventDefault()}}u(Ue,Te);var Ve=Se({2:"touch",3:"pen",4:"mouse"});Ue.prototype.stopPropagation=function(){Ue.Ia.stopPropagation.call(this);this.c.stopPropagation?this.c.stopPropagation():this.c.cancelBubble=!0};
Ue.prototype.preventDefault=function(){Ue.Ia.preventDefault.call(this);var a=this.c;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Qe)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var We="closure_lm_"+(1E6*Math.random()|0),Xe={},Ye=0;function G(a,b,c,d,e){if(d&&d.once)return Ze(a,b,c,d,e);if(p(b)){for(var f=0;f<b.length;f++)G(a,b[f],c,d,e);return null}c=$e(c);return a&&a[Je]?a.c(b,c,q(d)?!!d.capture:!!d,e):af(a,b,c,!1,d,e)}
function af(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var g=q(e)?!!e.capture:!!e,h=bf(a);h||(a[We]=h=new Ne(a));c=h.add(b,c,d,g,f);if(c.proxy)return c;d=cf();c.proxy=d;d.src=a;d.listener=c;if(a.addEventListener)Re||(e=g),void 0===e&&(e=!1),a.addEventListener(b.toString(),d,e);else if(a.attachEvent)a.attachEvent(df(b.toString()),d);else if(a.addListener&&a.removeListener)a.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");Ye++;return c}
function cf(){var a=ef,b=Pe?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b}function Ze(a,b,c,d,e){if(p(b)){for(var f=0;f<b.length;f++)Ze(a,b[f],c,d,e);return null}c=$e(c);return a&&a[Je]?a.f(b,c,q(d)?!!d.capture:!!d,e):af(a,b,c,!0,d,e)}
function ff(a){if("number"!==typeof a&&a&&!a.fa){var b=a.src;if(b&&b[Je])b.j(a);else{var c=a.type,d=a.proxy;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent?b.detachEvent(df(c),d):b.addListener&&b.removeListener&&b.removeListener(d);Ye--;(c=bf(b))?(d=a.type,d in c.c&&ua(c.c[d],a)&&(Me(a),0==c.c[d].length&&(delete c.c[d],c.f--)),0==c.f&&(c.src=null,b[We]=null)):Me(a)}}}function df(a){return a in Xe?Xe[a]:Xe[a]="on"+a}
function gf(a,b,c,d){var e=!0;if(a=bf(a))if(b=a.c[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.capture==c&&!f.fa&&(f=hf(f,d),e=e&&!1!==f)}return e}function hf(a,b){var c=a.listener,d=a.c||a.src;a.qa&&ff(a);return c.call(d,b)}
function ef(a,b){if(a.fa)return!0;if(!Pe){if(!b)a:{b=["window","event"];for(var c=n,d=0;d<b.length;d++)if(c=c[b[d]],null==c){b=null;break a}b=c}d=b;b=new Ue(d,this);c=!0;if(!(0>d.keyCode||void 0!=d.returnValue)){a:{var e=!1;if(0==d.keyCode)try{d.keyCode=-1;break a}catch(g){e=!0}if(e||void 0==d.returnValue)d.returnValue=!0}d=[];for(e=b.f;e;e=e.parentNode)d.push(e);a=a.type;for(e=d.length-1;!b.j&&0<=e;e--){b.f=d[e];var f=gf(d[e],a,!0,b);c=c&&f}for(e=0;!b.j&&e<d.length;e++)b.f=d[e],f=gf(d[e],a,!1,b),
c=c&&f}return c}return hf(a,new Ue(b,this))}function bf(a){a=a[We];return a instanceof Ne?a:null}var jf="__closure_events_fn_"+(1E9*Math.random()>>>0);function $e(a){if("function"==ba(a))return a;a[jf]||(a[jf]=function(b){return a.handleEvent(b)});return a[jf]};var Wd=1,Xd=2,Yd=3,Zd=4;function kf(a){if(a)return lf[a]=!0,a;a=mf();return lf[a]?kf():kf(a)}var lf={};function mf(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var b=16*Math.random()|0;return("x"==a?b:b&3|8).toString(16)})};function nf(a,b){a=a||{};this.G=!0;this.id=kf(a.id);this.m={};this.m.it=null;this.m.is=a.scale||b.is;this.m.ic=a.color||b.ic;this.m.ia=a.alpha||b.ia;this.m.lw=a.lineWidth||3;this.m.x=a.x||0;this.m.y=a.y||0;this.m.w=a.A||18;this.m.h=a.D||18;this.m.t=a.text||"";this.type=P(this.m,"it");this.scale=P(this.m,"is");this.color=P(this.m,"ic");this.alpha=P(this.m,"ia");this.lineWidth=P(this.m,"lw");this.x=P(this.m,"x");this.y=P(this.m,"y");this.A=P(this.m,"w");this.D=P(this.m,"h");this.text=P(this.m,"t");
this.f="is ic ia x y w h t".split(" ");this.c=new z(0,0)}l=nf.prototype;l.na=function(){var a={};a.x=this.x()+this.c.x;a.y=this.y()+this.c.y;this.c.x=0;this.c.y=0;return a};function ne(a){a=a||{};return{type:a.it,scale:a.is,color:a.ic,alpha:a.ia,lineWidth:a.lw,x:a.x,y:a.y,A:a.w,D:a.h,text:a.t}}l.za=function(a){this.c.x=a.x;this.c.y=a.y};l.ka=function(){var a={},b;for(b in this.m)a[b]=this.m[b];return a};l.sa=function(){var a=this,b={};v(this.f,function(c){b[c]=a.m[c]});return b};
l.ya=function(a){var b=this;v(this.f,function(c){void 0!==a[c]&&(b.m[c]=a[c])})};function of(a,b){a=a||{};a.A||(a.A=10);a.D||(a.D=10);nf.call(this,a,b);this.type(Wd)}u(of,nf);of.prototype.U=function(a,b){var c=this.scale(),d=this.A()*c,e=this.D()*c;c=this.lineWidth()*c/2+6;return pd(new z(a,b),new z(this.x()-d/2,this.y()-e/2),new z(this.x()+d/2,this.y()+e/2))<c||pd(new z(a,b),new z(this.x()+d/2,this.y()-e/2),new z(this.x()-d/2,this.y()+e/2))<c?!0:!1};function V(a,b){this.canvas=a;this.id=b}l=V.prototype;l.Z=function(){};l.ca=function(){};l.da=function(){};l.Da=function(){};l.oa=function(){};function pf(a,b){V.call(this,a,b);this.j=this.f=this.c=null}u(pf,V);function qf(a){var b=a.canvas;b.c.x+=b.J||0;b.c.y+=b.P||0;b.J=0;b.P=0;ff(a.f);ff(a.j)}function rf(a,b){qf(a);sf(a.canvas);var c=b.clientX,d=b.clientY;a.f=G(document.body,ie,function(e){var f=a.canvas,g=e.clientX-c;e=e.clientY-d;g=y(g,f.Ja,f.aa);e=y(e,f.Ka,f.ma);f.J=g;f.P=e;f.view.F.style.left=f.c.x+g+"px";f.view.F.style.top=f.c.y+e+"px"});a.j=G(document.body,je,function(){qf(a)})}l=pf.prototype;l.ea=function(){this.c=null};
l.Z=function(a,b){var c=this,d=!0;this.c&&this.da(b);this.c=b;tf(this.canvas.i,function(e){if(e.U(b.x,b.y,c.canvas.selected==e.id))return c.canvas.selected=e.id,L.c(fe),L.c(U),d=!1,!0});d&&(this.canvas.selected=null,L.c(fe),L.c(U),rf(this,a))};l.ca=function(a){var b=this;this.c&&(v(Kd(this.canvas),function(c){c.za(new z(a.x-b.c.x,a.y-b.c.y))}),L.c(U))};
l.da=function(a){var b=this;if(this.c){var c=a.y-this.c.y;(2<Math.abs(a.x-this.c.x)||2<Math.abs(c))&&v(Kd(this.canvas),function(d){var e=d.na();e.id=d.id;N(b.canvas,new M(4,e))})}this.c=null};
l.Da=function(a){var b=this;tf(this.canvas.i,function(c){if(0==c.type()&&c.U(a.x,a.y,b.canvas.selected==c.id))return L.c(R,ae),!0;if(c.type()==Zd&&c.U(a.x,a.y,b.canvas.selected==c.id)){var d=prompt(J("Enter text for the belay:"),c.text());if(null!==d&&d!=c.text()){var e={id:c.id};e.t=d;N(b.canvas,new M(4,e))}return!0}if(5==c.type()&&c.U(a.x,a.y,b.canvas.selected==c.id))return L.c(ce,function(f){if(null!==f&&f!=c.text()){var g={id:c.id};g.t=f;N(b.canvas,new M(4,g))}},c.text()),!0})};function uf(a,b){a=a||{};a.A||(a.A=12);a.D||(a.D=12);nf.call(this,a,b);this.type(Xd)}u(uf,nf);uf.prototype.U=function(a,b){var c=this.lineWidth()*this.scale()/2+1,d=this.A()*this.scale(),e=this.D()*this.scale();if(Math.abs(a-this.x())>d/2+c||Math.abs(b-this.y())>e/2+c)return!1;d=this.x()-.1*d;e=this.y()+.1*e;return a<d-c||a>d+c&&b>e+c?!1:!0};function vf(a,b,c){this.o=a;this.K=this.I=0;this.K=b;this.I=c;this.B=this.K+this.I;this.j=!0;this.c=0;this.f={x:0,y:0}}l=vf.prototype;l.moveTo=function(a,b){W(this,a,b)};
l.lineTo=function(a,b){var c=a-this.f.x,d=b-this.f.y,e=Math.atan2(d,c),f=Math.cos(e);e=Math.sin(e);c=kd(0,0,c,d);if(this.c){if(this.c>c){this.j?wf(this,a,b):W(this,a,b);this.c-=c;return}this.j?wf(this,this.f.x+f*this.c,this.f.y+e*this.c):W(this,this.f.x+f*this.c,this.f.y+e*this.c);c-=this.c;this.c=0;this.j=!this.j;if(!c)return}if(d=Math.floor(c/this.B)){for(var g=f*this.K,h=e*this.K,k=f*this.I,m=e*this.I,t=0;t<d;t++)this.j?(wf(this,this.f.x+g,this.f.y+h),W(this,this.f.x+k,this.f.y+m)):(W(this,this.f.x+
k,this.f.y+m),wf(this,this.f.x+g,this.f.y+h));c-=this.B*d}this.j?c>this.K?(wf(this,this.f.x+f*this.K,this.f.y+e*this.K),W(this,a,b),this.c=this.I-(c-this.K),this.j=!1):(wf(this,a,b),c==this.K?(this.c=0,this.j=!this.j):(this.c=this.K-c,W(this,a,b))):c>this.I?(W(this,this.f.x+f*this.I,this.f.y+e*this.I),wf(this,a,b),this.c=this.K-(c-this.I),this.j=!0):(W(this,a,b),c==this.I?(this.c=0,this.j=!this.j):this.c=this.I-c)};
l.quadraticCurveTo=function(a,b,c,d){var e=this.f.x,f=this.f.y,g=ld(e,f,a,b,c,d,6),h=0;if(this.c){if(this.c>g){this.j?xf(this,a,b,c,d):W(this,c,d);this.c-=g;return}h=this.c/g;var k=nd(e,f,a,b,c,d,h);this.j?xf(this,k[2],k[3],k[4],k[5]):W(this,k[4],k[5]);this.c=0;this.j=!this.j;if(!g)return}var m=Math.floor((g-g*h)/this.B);var t=this.K/g,w=this.I/g;if(m)for(var Q=0;Q<m;Q++){if(this.j){var x=h+t;k=md(e,f,a,b,c,d,h,x);xf(this,k[2],k[3],k[4],k[5]);h=x;x=h+w;k=md(e,f,a,b,c,d,h,x);W(this,k[4],k[5])}else x=
h+w,k=md(e,f,a,b,c,d,h,x),W(this,k[4],k[5]),h=x,x=h+t,k=md(e,f,a,b,c,d,h,x),xf(this,k[2],k[3],k[4],k[5]);h=x}m=g-g*h;this.j?m>this.K?(k=md(e,f,a,b,c,d,h,h+t),xf(this,k[2],k[3],k[4],k[5]),W(this,c,d),this.c=this.I-(m-this.K),this.j=!1):(k=od(e,f,a,b,c,d,h),xf(this,k[2],k[3],k[4],k[5]),g==this.K?(this.c=0,this.j=!this.j):(this.c=this.K-m,W(this,c,d))):m>this.I?(x=h+w,k=md(e,f,a,b,c,d,h,x),W(this,k[4],k[5]),k=od(e,f,a,b,c,d,x),xf(this,k[2],k[3],k[4],k[5]),this.c=this.K-(m-this.I),this.j=!0):(W(this,
c,d),m==this.I?(this.c=0,this.j=!this.j):this.c=this.I-m)};l.beginPath=function(){this.o.beginPath()};l.stroke=function(){this.o.stroke()};l.clearRect=function(a,b,c,d){this.o.clearRect(a,b,c,d)};function yf(a){a.o=null;a.f=null}function W(a,b,c){a.f={x:b,y:c};a.o.moveTo(b,c)}function wf(a,b,c){if(b!=a.f.x||c!=a.f.y)a.f={x:b,y:c},a.o.lineTo(b,c)}function xf(a,b,c,d,e){if(b!=d||c!=e||d!=a.f.x||e!=a.f.y)a.f={x:d,y:e},a.o.quadraticCurveTo(b,c,d,e)};function zf(a,b){a=a||{};this.C=!0;this.id=kf(a.id);this.m={};this.m.it=0;this.m.is=a.scale||b.is;this.m.ic=a.color||b.ic;this.m.ia=a.alpha||b.ia;this.m.lw=a.lineWidth||3;this.m.cp=a.L||[];this.m.nl=a.K||b.nl;this.m.fl=H(a.I)?a.I:b.fl;this.m.lc=a.ga||b.lc;this.type=P(this.m,"it");this.scale=P(this.m,"is");this.color=P(this.m,"ic");this.alpha=P(this.m,"ia");this.lineWidth=P(this.m,"lw");this.L=P(this.m,"cp");this.K=P(this.m,"nl");this.I=P(this.m,"fl");this.ga=P(this.m,"lc");this.j="is ic ia lw cp nl fl lc".split(" ");
this.f=new z(0,0);this.o=[];Af(this)}function Bf(a,b,c,d,e,f){var g=[],h=ld(a,b,c,d,e,f),k=0,m=Math.floor(h/10),t=10/h;if(m){for(var w=0;w<m;w++)h=k+t,k=md(a,b,c,d,e,f,k,h),g.push(new z(k[4],k[5])),k=h;g.push(new z(e,f))}return g}l=zf.prototype;l.na=function(){var a=this,b=[],c={};v(this.L(),function(d){b.push(new z(d.x+a.f.x,d.y+a.f.y))});this.f.x=0;this.f.y=0;c.cp=b;return c};
function oe(a){a=a||{};var b={type:a.it,scale:a.is,color:a.ic,alpha:a.ia,lineWidth:a.lw,K:a.nl,I:a.fl,ga:a.lc};if(a.cp&&p(a.cp)){var c=[];v(a.cp,function(d){c.push(new z(d.x,d.y))});b.L=c}return b}l.za=function(a){this.f=a};l.ka=function(){var a={},b;for(b in this.m)a[b]=this.m[b];if(a.cp&&p(a.cp)){var c=[];v(a.cp,function(d){c.push({x:d.x,y:d.y})});a.cp=c}return a};l.sa=function(){var a=this,b={};v(this.j,function(c){b[c]=a.m[c]});return b};
l.ya=function(a){var b=this;v(this.j,function(c){void 0!==a[c]&&(b.m[c]=a[c])})};l.U=function(a,b){for(var c=this.o,d=this.lineWidth()*this.scale()/2+6,e=0,f=c.length-1;e<f;e++)if(pd(new z(a,b),c[e],c[e+1])<d)return!0;return!1};function Cf(a){if(0===a.L().length)a.c=null;else{var b=Number.MAX_VALUE,c=-Number.MAX_VALUE,d=Number.MAX_VALUE,e=-Number.MAX_VALUE;v(a.L(),function(f){b=Math.min(b,f.x);c=Math.max(c,f.x);d=Math.min(d,f.y);e=Math.max(e,f.y)});a.c=new jd(b,d,c-b,e-d)}}
function Af(a){var b=[];if(a.ga()){var c=a.L(),d=c.length;v(c,function(e,f){if(0===f)b.push(new z(e.x,e.y));else{var g=c[f-1];1==f?b.push(new z((e.x+g.x)/2,(e.y+g.y)/2)):b=b.concat(Bf(b[b.length-1].x,b[b.length-1].y,g.x,g.y,(e.x+g.x)/2,(e.y+g.y)/2));f==d-1&&b.push(new z(e.x,e.y))}})}else v(a.L(),function(e){b.push(new z(e.x,e.y))});a.o=b};function Df(a,b,c){V.call(this,a,b);this.j=[];this.f=this.c=this.o=null;this.B=c}u(Df,V);Df.prototype.Z=function(a,b){this.c&&this.c.L(Ef(this));this.j.push(new z(b.x,b.y));this.c?(a={id:this.c.id},a.cp=Ef(this),N(this.canvas,new M(4,a))):1<this.j.length?(Ff(this),a=new M(2,{L:Ef(this)}),N(this.canvas,a),this.c=this.canvas.i.getItem(a.H.id)):(this.o=new z(b.x,b.y),this.f=this.B,this.f.L(Ef(this,this.o)),this.f.K(this.canvas.i.m.nl),this.f.I(this.canvas.i.m.fl),this.f.scale(this.canvas.i.m.is),L.c(U))};
Df.prototype.ca=function(a){var b=this.c||this.f;b&&(this.o=new z(a.x,a.y),b.L(Ef(this,this.o)),Af(b),L.c(U))};Df.prototype.oa=function(a){if(13==a.keyCode&&this.c)return this.ea(),!0};Df.prototype.ea=function(){this.c&&(this.c.L(Ef(this)),Af(this.c),L.c(U));this.j=[];this.c=this.o=null;Ff(this)};function Ef(a,b){return b?a.j.concat([b]):a.j.concat([])}function Ff(a){a.f&&a.f.L([new z(0,0)]);a.f=null};function Gf(a,b){a=a||{};a.lineWidth||(a.lineWidth=2);nf.call(this,a,b);this.type(Zd)}u(Gf,nf);Gf.prototype.U=function(a,b){var c=this.lineWidth()*this.scale()/2+1;return wa(new z(a,b),new z(this.x(),this.y()))<=this.A()*this.scale()/2+c?!0:!1};function X(a){this.i=a;this.c=this.J=10;this.G=this.C=null;this.canvas=D(document,"CANVAS");this.canvas.width=this.i.A()+2*this.c;this.canvas.height=this.i.D()+2*this.c;this.canvas.style.position="absolute"}X.prototype.f=function(){};
function Hf(a,b,c,d,e,f){a.c=a.J*Math.max(1,c);var g=Math.round(c*a.i.A())+2*a.c,h=Math.round(c*a.i.D())+2*a.c;e||(b.canvas.width=g,b.canvas.height=h,b.clearRect(0,0,g,h));b.save();e&&b.translate(Math.round(a.i.x()-g/2),Math.round(a.i.y()-h/2));b.translate(a.c,a.c);b.scale(c,c);b.lineCap="round";d&&(b.save(),a.f(b,"rgba(255,0,0,0.75)",a.i.lineWidth()+4/c),b.restore());b.save();a.f(b,Nc(a.i.color()),a.i.lineWidth()+2/(c*(f||1)));b.restore();a.f(b);b.restore()}
X.prototype.o=function(a,b){a=a||1;var c=a*this.i.scale(),d={A:this.i.A(),D:this.i.D(),color:this.i.color(),alpha:this.i.alpha(),scale:c,selected:b,text:this.i.text()},e={x:this.i.x(),y:this.i.y(),A:this.i.A(),D:this.i.D(),Ga:this.i.c.x,Ha:this.i.c.y,scale:c};Gd(d,this.C)||(this.C=d,d=this.canvas.getContext("2d"),Hf(this,d,c,b));Gd(e,this.G)||(this.G=e,a=a||1,c=a*this.i.scale(),b=Math.round(c*this.i.A())+2*this.c,c=Math.round(c*this.i.D())+2*this.c,this.canvas.style.left=Math.round(a*(this.i.x()+
this.i.c.x)-b/2)+"px",this.canvas.style.top=Math.round(a*(this.i.y()+this.i.c.y)-c/2)+"px")};X.prototype.B=function(a,b){a.save();a.scale(b||1,b||1);Hf(this,a,this.i.scale(),!1,!0,b);a.restore()};X.prototype.j=function(){this.G=this.C=this.i=null;Kb(this.canvas);this.canvas=null};function If(a,b){a=a||{};a.lineWidth||(a.lineWidth=2);nf.call(this,a,b);this.type(Yd)}u(If,nf);If.prototype.U=function(a,b){var c=this.lineWidth()*this.scale()/2+1;return wa(new z(a,b),new z(this.x(),this.y()))<=this.A()*this.scale()/2+c?!0:!1};function Jf(a){X.call(this,a);this.i=a}u(Jf,X);Jf.prototype.f=function(a,b,c){a.strokeStyle=b||this.i.color();a.lineWidth=c||this.i.lineWidth();a.beginPath();b=this.i.A();c=this.i.D();var d=Math.min(this.i.A(),this.i.D())/2;a.moveTo(b/2+d*Math.cos(0),c/2+d*Math.sin(0));a.arc(b/2,c/2,d,0,2*Math.PI,!1);a.moveTo(b/2,.25*c);a.lineTo(b/2,.75*c);a.moveTo(.25*b,c/2);a.lineTo(b/2,.75*c);a.lineTo(.75*b,c/2);a.stroke()};function Qf(a){X.call(this,a);this.i=a}u(Qf,X);Qf.prototype.f=function(a,b,c){var d=this.i.A(),e=this.i.D(),f=.3*e;a.strokeStyle=b||this.i.color();a.lineWidth=c||this.i.lineWidth();a.beginPath();a.moveTo(.4*d,e);a.lineTo(.4*d,0);a.lineTo(d-f,0);a.arc(d-f,f,f,-Math.PI/2,Math.PI/2,!1);a.lineTo(.4*d,2*f);a.stroke()};function Rf(a,b){a=a||{};this.J=!0;this.id=kf(a.id);this.m={};this.m.it=5;this.m.is=a.scale||b.is;this.m.ic=a.color||b.ic;this.m.ia=a.alpha||b.ia;this.m.x=a.x||0;this.m.y=a.y||0;this.m.t=a.text||"";this.m.ta=a.textAlign||b.ta;this.m.tb=a.X||b.tb;this.type=P(this.m,"it");this.scale=P(this.m,"is");this.color=P(this.m,"ic");this.alpha=P(this.m,"ia");this.x=P(this.m,"x");this.y=P(this.m,"y");this.text=P(this.m,"t");this.textAlign=P(this.m,"ta");this.X=P(this.m,"tb");this.o="is ic ia x y t ta tb".split(" ");
this.f=new z(0,0);this.j=null;this.B=0;this.c=[]}l=Rf.prototype;l.na=function(){var a={};a.x=this.x()+this.f.x;a.y=this.y()+this.f.y;this.f.x=0;this.f.y=0;return a};function Sf(a){var b=a.text().replace(/[\s\xa0]+$/,"").replace(/\n\r/g,"\n").replace(/\r/g,"\n").replace(/\t/g,"    ").split("\n"),c=0,d=[];v(b,function(e){d.push({text:e,top:c,size:12,width:-1,bold:!1,ha:!1});c+=18});a.c=d}
function pe(a){a=a||{};return{type:a.it,scale:a.is,color:a.ic,alpha:a.ia,x:a.x,y:a.y,text:a.t,textAlign:a.ta,X:a.tb}}l.za=function(a){this.f.x=a.x;this.f.y=a.y};l.ka=function(){var a={},b;for(b in this.m)a[b]=this.m[b];return a};l.sa=function(){var a=this,b={};v(this.o,function(c){b[c]=a.m[c]});return b};l.ya=function(a){var b=this;v(this.o,function(c){void 0!==a[c]&&(b.m[c]=a[c])})};
l.U=function(a,b,c){if(!this.j)return!1;var d=this.scale(),e=this.textAlign(),f=new jd(this.x(),this.y(),this.j.x*this.scale(),this.j.y*this.scale()),g=this.X()||c?this.B:0;"c"==e?f.x-=f.A/2:"r"==e&&(f.x-=f.A);if(Math.abs(a-f.x-f.A/2)>f.A/2+g||Math.abs(b-f.y-f.D/2)>f.D/2+g)return!1;if(this.X()||c)return!0;g=0;for(var h=this.c.length;g<h;g++)if(c=this.c[g].width*d,-1<c&&a>=f.x+("c"==e?f.A/2-c/2:"r"==e?f.A-c:0)&&a<=f.x+("c"==e?f.A/2+c/2:"r"==e?f.A:c)&&b>=f.y+this.c[g].top*d&&b<=f.y+(g+1<h?this.c[g+
1].top:this.c[g].top+this.c[g].size)*d)return!0;return!1};function Tf(a){this.i=a;this.c=this.J=15;this.f=this.G=this.C=null;this.canvas=D(document,"CANVAS");this.canvas.style.position="absolute"}
function Uf(a,b,c,d){var e,f,g,h=void 0===c;switch(a.i.textAlign()){case "c":b.textAlign="center";break;case "r":b.textAlign="right";break;default:b.textAlign="left"}b.textBaseline="top";b.fillStyle=a.i.color();b.strokeStyle=c||a.i.color();b.lineWidth=d||0;v(a.i.c,function(k){if(e!=k.size||f!=k.bold||g!=k.ha)e=k.size,f=k.bold,g=k.ha,b.font=Vf(k.ha,k.bold,k.size);h?b.fillText(k.text,0,k.top):b.strokeText(k.text,0,k.top)})}
function Vf(a,b,c){var d="";a&&(d+="italic ");b&&(d+="bold ");return d+c+"px Arial, Helvetica, sans-serif"}function Wf(a,b){var c=0;b.save();v(a.i.c,function(d){b.font=Vf(d.ha,d.bold,d.size);d.width=b.measureText(d.text).width;c=Math.min(2048,Math.max(d.width,c))});b.restore();return new z(c,a.i.c[a.i.c.length-1].top+a.i.c[a.i.c.length-1].size)}
function Xf(a,b,c,d,e,f){a.c=a.J*Math.max(1,c);Sf(a.i);a.f=Wf(a,b);var g=a.i,h=a.c;g.j=a.f;g.B=h;g=Math.round(c*a.f.x)+2*a.c;h=Math.round(c*a.f.y)+2*a.c;e||(b.canvas.width=g,b.canvas.height=h,b.clearRect(0,0,g,h));b.save();if(e)switch(b.translate(a.i.x(),a.i.y()),a.i.textAlign()){case "c":b.translate(-g/2,-a.c);break;case "r":b.translate(-g+a.c,-a.c);break;default:b.translate(-a.c,-a.c)}a.i.X()&&(b.save(),b.fillStyle=Nc(a.i.color()),b.fillRect(0,0,g,h),b.restore());d&&(b.save(),b.strokeStyle="rgba(255,0,0,0.75)",
b.lineWidth=1,b.strokeRect(.5,.5,g-1,h-1),b.restore());switch(a.i.textAlign()){case "c":b.translate(g/2,a.c);break;case "r":b.translate(g-a.c,a.c);break;default:b.translate(a.c,a.c)}b.scale(c,c);b.lineCap="round";a.i.X()||(b.save(),Uf(a,b,Nc(a.i.color()),2/(c*(f||1))),b.restore());Uf(a,b);b.restore()}
Tf.prototype.o=function(a,b){a=a||1;var c=a*this.i.scale(),d={color:this.i.color(),alpha:this.i.alpha(),scale:c,selected:b,text:this.i.text(),textAlign:this.i.textAlign(),X:this.i.X()},e={x:this.i.x(),y:this.i.y(),Ga:this.i.f.x,Ha:this.i.f.y,scale:c,textAlign:this.i.textAlign()};Gd(d,this.C)||(this.C=d,d=this.canvas.getContext("2d"),Xf(this,d,c,b));if(!Gd(e,this.G)){this.G=e;a=a||1;b=a*this.i.scale();b=Math.round(b*this.f.x)+2*this.c;switch(this.i.textAlign()){case "c":this.canvas.style.left=Math.round(a*
(this.i.x()+this.i.f.x)-b/2)+"px";break;case "r":this.canvas.style.left=Math.round(a*(this.i.x()+this.i.f.x)-b+this.c)+"px";break;default:this.canvas.style.left=Math.round(a*(this.i.x()+this.i.f.x)-this.c)+"px"}this.canvas.style.top=Math.round(a*(this.i.y()+this.i.f.y)-this.c)+"px"}};Tf.prototype.B=function(a,b){a.save();a.scale(b||1,b||1);Xf(this,a,this.i.scale(),!1,!0,b);a.restore()};Tf.prototype.j=function(){this.G=this.C=this.i=null;Kb(this.canvas);this.canvas=null};function Yf(a){X.call(this,a);this.i=a}u(Yf,X);
Yf.prototype.f=function(a,b,c){var d=void 0===b,e=this.i.A(),f=this.i.D(),g=Math.min(e,f)/2;a.strokeStyle=b||this.i.color();a.lineWidth=c||this.i.lineWidth();a.beginPath();a.moveTo(e/2+g*Math.cos(0),f/2+g*Math.sin(0));a.arc(e/2,f/2,g,0,2*Math.PI,!1);a.stroke();this.i.text()&&(a.font="12px Arial, Helvetica, sans-serif",a.textAlign="center",a.textBaseline="middle",d?(a.fillStyle=this.i.color(),a.fillText(this.i.text(),e/2,f/2)):(a.strokeStyle=b||this.i.color(),a.lineWidth=Math.min(2,(c||this.i.lineWidth())-
this.i.lineWidth()),a.strokeText(this.i.text(),e/2,f/2)))};function Zf(a,b){b=b||{};this.image=a;this.D=a.height;this.A=a.width;this.scale=1;this.c=[.125,1/6,.25,1/3,.5,2/3,1,2,3,4,5,6,7,8,12,16];this.N=[];this.m={};this.m.is=1;this.m.ic="#ffff00";this.m.ia=1;this.m.nl=10;this.m.fl=10;this.m.lc=!1;this.m.ta="l";this.m.tb=!1;for(var c in b)void 0!==this.m[c]&&(this.m[c]=b[c]);this.f=new zf({L:[new z(0,0)]},this.m);this.N.push(this.f)}function $f(a){a.N=[];a.N.push(a.f)}Zf.prototype.getItem=function(a){return ta(this.N,function(b){return b.id==a})};
function tf(a,b){for(var c=a.N.length-1;0<=c&&(a.N[c]==a.f||!0!==b(a.N[c]));c--);}function ag(a,b,c){for(var d=0,e=a.N.length;d<e&&(!c&&a.N[d]==a.f||!0!==b(a.N[d]));d++);};function bg(a){X.call(this,a);this.i=a}u(bg,X);bg.prototype.f=function(a,b,c){a.strokeStyle=b||this.i.color();a.lineWidth=c||this.i.lineWidth();a.beginPath();a.moveTo(0,0);a.lineTo(this.i.A(),this.i.D());a.moveTo(this.i.A(),0);a.lineTo(0,this.i.D());a.stroke()};function cg(a){this.i=a;this.c=this.G=10;this.C=this.f=null;this.canvas=D(document,"canvas");this.canvas.width=2*this.c;this.canvas.height=2*this.c;this.canvas.style.position="absolute"}
function dg(a,b,c,d){var e=a.i.scale(),f=0<a.i.I();b.strokeStyle=c||a.i.color();b.lineWidth=d||a.i.lineWidth()*e;var g=f?new vf(b,a.i.K()*e,a.i.I()*e):b;g.beginPath();if(a.i.ga()){var h=a.i.L(),k=h.length;v(h,function(m,t){if(0===t)g.moveTo(m.x,m.y);else{var w=h[t-1];1==t?g.lineTo((m.x+w.x)/2,(m.y+w.y)/2):g.quadraticCurveTo(w.x,w.y,(m.x+w.x)/2,(m.y+w.y)/2);t==k-1&&g.lineTo(m.x,m.y)}})}else v(a.i.L(),function(m,t){0===t?g.moveTo(m.x,m.y):g.lineTo(m.x,m.y)});g.stroke();f&&yf(g)}
function eg(a,b,c){c=c||1;var d=a.i.color(),e=Nc(d),f=7/c;b.save();v(a.i.L(),function(g){b.beginPath();b.moveTo(g.x+f,g.y);b.arc(g.x,g.y,f,0,2*Math.PI,!1);b.strokeStyle=e;b.lineWidth=6/c;b.stroke();b.strokeStyle=d;b.lineWidth=4/c;b.stroke()});b.restore()}
function fg(a,b,c,d,e,f){a.c=a.G*Math.max(1,a.i.scale()*c);Cf(a.i);Af(a.i);var g=Math.round(c*a.i.c.A)+2*a.c,h=Math.round(c*a.i.c.D)+2*a.c;f||(b.canvas.width=g,b.canvas.height=h,b.clearRect(0,0,g,h));b.save();f||b.translate(a.c-Math.round(c*a.i.c.x),a.c-Math.round(c*a.i.c.y));b.scale(c,c);f=a.i.scale();b.save();b.lineCap="round";d?(b.save(),dg(a,b,"rgba(255,0,0,0.75)",a.i.lineWidth()*f+4/c)):(b.save(),dg(a,b,Nc(a.i.color()),a.i.lineWidth()*f+2/c));b.restore();dg(a,b);b.restore();d&&e==ae&&eg(a,b,
c);b.restore()}cg.prototype.o=function(a,b,c){a=a||1;var d=this.i.ka();d.scale=a;d.selected=!!b;d.mode=c||null;Gd(d,this.f)||(this.f=d,d=this.canvas.getContext("2d"),fg(this,d,a,b,c));b={Ga:this.i.f.x,Ha:this.i.f.y,x:this.i.c.x,y:this.i.c.y,A:this.i.c.A,D:this.i.c.D,scale:a*this.i.scale()};Gd(b,this.C)||(this.C=b,a=a||1,this.canvas.style.left=Math.round(a*(this.i.f.x+this.i.c.x)-this.c)+"px",this.canvas.style.top=Math.round(a*(this.i.f.y+this.i.c.y)-this.c)+"px")};
cg.prototype.B=function(a,b){a.save();fg(this,a,b||1,!1,null,!0);a.restore()};cg.prototype.j=function(){this.C=this.f=this.i=null;Kb(this.canvas);this.canvas=null};function gg(a,b){this.f=a;this.i=b;this.B=1;this.o=!0;this.j=!1;this.F=Hb("DIV","canvas-container");this.F.appendChild(this.i.image);this.G=Hb("DIV","fullsize");this.F.appendChild(this.G);this.c={};setInterval(r(this.C,this),10);I(U,r(this.J,this))}gg.prototype.J=function(a){this.o=!0;a&&this.C()};gg.prototype.C=function(){this.o&&hg(this,this.i.scale);this.o=!1};
function hg(a,b){var c={};ag(a.i,function(e){a:{var f=b;f=f||1;var g=a.c[e.id];if(!g){switch(e.type()){case Wd:g=new bg(e);break;case Xd:g=new Qf(e);break;case Yd:g=new Jf(e);break;case Zd:g=new Yf(e);break;case 5:g=new Tf(e);break;case 0:g=new cg(e)}if(!g)break a;a.c[e.id]=g;a.G.appendChild(g.canvas)}g.o(f,a.f.selected==e.id,a.f.mode.id)}c[e.id]=!0},!0);for(var d in a.c)c[d]||(a.c[d].j(),delete a.c[d]);if(a.i.scale!=a.B||a.j)Qb(a.F,{width:Math.round(a.i.scale*a.i.A)+"px",height:Math.round(a.i.scale*
a.i.D)+"px"}),a.j?(ig(a.f),a.j=!1):jg(a.f,a.i.scale/a.B),a.F.style.left=a.f.c.x+"px",a.F.style.top=a.f.c.y+"px";a.B=a.i.scale}function kg(a,b,c){ag(a.i,function(d){a.c[d.id]&&a.c[d.id].B(b,c)})};function lg(a,b){V.call(this,a,b);this.o=this.c=this.f=this.j=null}u(lg,V);l=lg.prototype;l.xa=function(){var a=this;sa(Kd(this.canvas),function(b){return 0==b.type()?(a.f=b,L.c(U),!0):!1})};l.ea=function(){this.o=this.c=this.f=this.j=null;L.c(U)};l.Z=function(a,b){this.j&&this.da(b);if(this.f){var c=this;sa(this.f.L(),function(d){var e=b.x-d.x,f=b.y-d.y;return 100>e*e+f*f?(c.c=d,c.o=new z(d.x,d.y),!0):!1});this.c?this.j=b:L.c(R,Ud)}};
l.ca=function(a){this.j&&this.f&&this.c&&(this.c.x=this.o.x+a.x-this.j.x,this.c.y=this.o.y+a.y-this.j.y,Af(this.f),L.c(U))};l.da=function(a){this.ca(a);if(this.j&&this.f&&this.c){var b=[];v(this.f.L(),function(c){b.push(new z(c.x,c.y))});this.c.x=this.o.x;this.c.y=this.o.y;a={id:this.f.id};a.cp=b;N(this.canvas,new M(4,a))}this.o=this.c=this.j=null};l.oa=function(a){if(13==a.keyCode)return L.c(R,Ud),!0};function mg(a,b){V.call(this,a,b);this.c=null}u(mg,V);mg.prototype.xa=function(a){this.c=H(a)?a:null};mg.prototype.Z=function(a,b){null!==this.c&&N(this.canvas,new M(1,{type:this.c,x:b.x,y:b.y}))};function ng(a,b){V.call(this,a,b)}u(ng,V);ng.prototype.Z=function(a,b){var c=this;L.c(ce,function(d){d&&N(c.canvas,new M(3,{text:d,x:b.x,y:b.y}))},J("Enter some text"))};function og(a,b,c){var d=this;this.f=a;this.i=new Zf(b,c);this.view=new gg(this,this.i);this.c=new z;this.selected=null;Id=this;this.j={};this.j[Ud]=new pf(this,Ud);this.j[Vd]=new Df(this,Vd,this.i.f);this.j[T]=new mg(this,T);this.j[$d]=new ng(this,$d);this.j[ae]=new lg(this,ae);var e=null;I(R,function(f,g){if(d.j[f]){var h=d.mode!=d.j[f]||e!=g;h&&d.mode&&d.mode.ea&&d.mode.ea();d.mode=d.j[f];h&&d.mode.xa&&d.mode.xa(g);e=g}});this.mode=null;this.C=[];this.B=[];this.o=0;this.G=[];setInterval(function(){Md(d)},
100)}function Md(a){a.o=Math.max(0,a.o-1);0==a.o&&0<a.G.length&&(a.C.unshift(a.G),a.B=[],a.G=[])}function he(a,b){var c=b.clientX;b=b.clientY;var d=document;var e=d.body;d=d.documentElement;e=new z(e.scrollLeft||d.scrollLeft,e.scrollTop||d.scrollTop);d=Vb(a.f.o.viewport);return new z(Math.round((c+e.x-d.x-a.c.x)/a.i.scale),Math.round((b+e.y-d.y-a.c.y)/a.i.scale))}
function me(a){if(0!==a.C.length){var b=[];v(a.C[0],function(c){c=Hd(c);null!=c&&(c.f=!0,c.c=!1,b.unshift(c),N(a,c))});a.C.shift();a.B.unshift(b)}}function le(a){if(0!==a.B.length){var b=[];v(a.B[0],function(c){c=Hd(c);null!=c&&(c.c=!0,c.f=!1,b.unshift(c),N(a,c))});a.B.shift();a.C.unshift(b)}}
function N(a,b){switch(b.type){case 1:switch(b.H.type){case Wd:var c=new of(b.H,a.i.m);break;case Xd:c=new uf(b.H,a.i.m);break;case Yd:c=new If(b.H,a.i.m);break;case Zd:c=new Gf(b.H,a.i.m)}if(c)b.H.id=c.id,a.i.N.push(c);else return;break;case 2:if(b.H.L&&1<b.H.L.length)c=new zf(b.H,a.i.m),b.H.id=c.id,a.i.N.push(c);else return;break;case 3:if(b.H.text)c=new Rf(b.H,a.i.m),b.H.id=c.id,a.i.N.push(c);else return;break;case 4:if(c=a.i.getItem(b.H.id)){if(!b.j){var d=c.sa(),e={id:b.H.id},f;for(f in b.H)void 0!==
d[f]&&(e[f]=d[f]);b.j=e}c.ya(b.H)}else return;break;case 5:case 7:case 6:if(c=a.i.getItem(b.H.id))ua(a.i.N,c);else return;break;default:return}a.o++;b.f||b.c||a.G.unshift(b);Md(a);L.c(U);L.c(ge)}function Kd(a){return a.selected?(a=a.i.getItem(a.selected))?[a]:[]:[]}function qe(a){L.c(U);a=a.i;for(var b=0,c=a.c.length;b<c;b++)if(1E-6>=Math.abs(a.c[b]-a.scale)){a.scale=a.c[y(b-1,0,c-1)];break}else if(a.scale>a.c[b]&&(!a.c[b+1]||a.scale<a.c[b+1])){a.scale=a.c[b];break}}
function re(a){L.c(U);a=a.i;for(var b=0,c=a.c.length;b<c;b++)if(1E-6>=Math.abs(a.c[b]-a.scale)){a.scale=a.c[y(b+1,0,c-1)];break}else if(a.scale>a.c[b]&&a.c[b+1]&&a.scale<a.c[b+1]){a.scale=a.c[b+1];break}}function pg(a,b){b=H(b)?b/100:"cover"==b?Math.max(a.f.f/a.i.A,a.f.j/a.i.D):Math.min(a.f.f/a.i.A,a.f.j/a.i.D);a=a.i;a.scale=y(b,a.c[0],a.c[a.c.length-1]);L.c(U)}
function jg(a,b){var c=b*(a.f.j/2-a.c.y),d=a.i.A*a.i.scale,e=a.i.D*a.i.scale;a.c.x=-Math.round(b*(a.f.f/2-a.c.x)-a.f.f/2);a.c.y=-Math.round(c-a.f.j/2);a.c.x=d<=a.f.f?Math.round(a.f.f/2-d/2):y(a.c.x,a.f.f-d,0);a.c.y=e<=a.f.j?Math.round(a.f.j/2-e/2):y(a.c.y,a.f.j-e,0)}function ig(a){a.c.x=Math.round(a.f.f/2-a.i.A*a.i.scale/2);a.c.y=Math.round(a.f.j/2-a.i.D*a.i.scale/2)}
function sf(a){var b=Math.round(a.i.D*a.i.scale);a.Ja=-Math.max(a.c.x+Math.round(a.i.A*a.i.scale)-a.f.f,0);a.aa=Math.max(-a.c.x,0);a.Ka=-Math.max(a.c.y+b-a.f.j,0);a.ma=Math.max(-a.c.y,0)}
og.prototype.ua=function(a,b,c,d){L.c(U,!0);var e=D(document,"CANVAS"),f=e.getContext("2d"),g=1;b=a&&b&&"jpg"==b.toLowerCase()?"jpeg":"png";c?(g=c/this.i.A,e.width=c,e.height=Math.round(c*this.i.D/this.i.A)):(e.width=this.i.A,e.height=this.i.D);a&&(1!==g?f.drawImage(d||this.i.image,0,0,e.width,e.height):f.drawImage(d||this.i.image,0,0));kg(this.view,f,g);try{return e.toDataURL("image/"+b)}catch(h){return alert("Source image must be from the same domain to be included in getImage. Try getImage() without any parameters."),
""}};function qg(a){a=String(a);if(/^\s*$/.test(a)?0:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/(?:"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)[\s\u2028\u2029]*(?=:|,|]|}|$)/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))try{return eval("("+a+")")}catch(b){}throw Error("Invalid JSON string: "+a);}function rg(a){var b=[];sg(new tg,a,b);return b.join("")}function tg(){}
function sg(a,b,c){if(null==b)c.push("null");else{if("object"==typeof b){if(p(b)){var d=b;b=d.length;c.push("[");for(var e="",f=0;f<b;f++)c.push(e),sg(a,d[f],c),e=",";c.push("]");return}if(b instanceof String||b instanceof Number||b instanceof Boolean)b=b.valueOf();else{c.push("{");e="";for(d in b)Object.prototype.hasOwnProperty.call(b,d)&&(f=b[d],"function"!=typeof f&&(c.push(e),ug(d,c),c.push(":"),sg(a,f,c),e=","));c.push("}");return}}switch(typeof b){case "string":ug(b,c);break;case "number":c.push(isFinite(b)&&
!isNaN(b)?String(b):"null");break;case "boolean":c.push(String(b));break;case "function":c.push("null");break;default:throw Error("Unknown type: "+typeof b);}}}var vg={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\x0B":"\\u000b"},wg=/\uffff/.test("\uffff")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;
function ug(a,b){b.push('"',a.replace(wg,function(c){var d=vg[c];d||(d="\\u"+(c.charCodeAt(0)|65536).toString(16).substr(1),vg[c]=d);return d}),'"')};function $b(a){return"string"==typeof a}function H(a){return"number"==typeof a}function xg(a,b,c){c=c||{};this.H={A:c.width||null,D:c.height||null,zoom:c.zoom||"contain",parent:c.parent||null,S:c.onChange||null,ja:c.scaleFactor||1};this.J={};this.J.is=this.H.ja;this.aa={ja:this.H.ja};this.G=556;this.C=a;this.P=!1;this.B=[];b&&this.B.push(b);var d=D(document,"img");this.ma=G(d,"load",function(){yg(this,d)},!1,this);d.src=this.C.src;this.H.S&&I(ge,function(){this.H.S()},this)}
function yg(a,b){ff(a.ma);a.c=new og(a,b,a.J);a.o=new be(a,a.aa);a.f=a.H.A||b.width;a.j=a.H.D||b.height;H(a.f)&&a.f<a.G&&(a.f=a.G);Qb(a.o.f,{position:"relative",display:"inherit"==a.C.style.display?"inline-block":a.C.style.display||"inline-block",width:H(a.f)?a.f+"px":a.f,height:H(a.j)?a.j+29+"px":a.j});a.H.parent?a.H.parent.appendChild(a.o.f):Lb(a.o.f,a.C);H(a.f)||(a.f=Zb(a.o.f).width-2);H(a.j)||(a.j=Zb(a.o.f).height-29-2);de(a.o);pg(a.c,a.H.zoom);a.c.view.j=!0;a.P=!0;v(a.B,function(c){c()});a.B=
[]}function zg(a,b){$f(a.c.i);v(b.items||[],function(c){var d=null;switch(c.it){case Wd:d=new of(ne(c),a.c.i.m);break;case Xd:d=new uf(ne(c),a.c.i.m);break;case Yd:d=new If(ne(c),a.c.i.m);break;case Zd:d=new Gf(ne(c),a.c.i.m);break;case 0:d=new zf(oe(c),a.c.i.m);break;case 5:d=new Rf(pe(c),a.c.i.m)}d&&a.c.i.N.push(d)});L.c(U)}function Ag(a,b){var c=[];ag(a.c.i,function(d){c.push(d.ka())});return b?Za(bb(rg({items:c}))):rg({items:c})}xg.prototype.ua=function(a,b,c,d){return this.c.ua(a,b,c,d)};
var L=new He,U="cr",fe="sc",Dd="scp",ce="sta",ed="ho",R="m",ge="a",Ud=0,Vd=1,T=2,$d=3,ae=4;
function Bg(a,b,c){var d,e=new xg(a,b?function(){b.call(d)}:null,c),f=c.onError||function(g){alert(g)};return d={loadData:function(g){try{g=qg(g),e.P?zg(e,g):e.B.push(function(){zg(e,g)})}catch(h){f(J("Invalid data."))}},getData:function(g){try{return Ag(e,g)}catch(h){f(J("Editor hasn't been initialized yet, make calls in onReady callback."))}},getImage:function(g,h,k,m){try{return e.ua(g,h,parseInt(k,10)||null,m)}catch(t){f(J("Editor hasn't been initialized yet, make calls in onReady callback."))}}}}
var Cg=["BetaCreator"],Y=n;Cg[0]in Y||"undefined"==typeof Y.execScript||Y.execScript("var "+Cg[0]);for(var Dg;Cg.length&&(Dg=Cg.shift());)Cg.length||void 0===Bg?Y[Dg]&&Y[Dg]!==Object.prototype[Dg]?Y=Y[Dg]:Y=Y[Dg]={}:Y[Dg]=Bg;
