/**
 *  Copyright 2012 Alma Madsen
 *
 *  BetaCreator is Licensed under the Apache License, Version 2.0 (the "License");
 *  you may not use this file except in compliance with the License.
 *  You may obtain a copy of the License at
 *
 *    http://www.apache.org/licenses/LICENSE-2.0
 *
 *  Unless required by applicable law or agreed to in writing, software
 *  distributed under the License is distributed on an "AS IS" BASIS,
 *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 *  See the License for the specific language governing permissions and
 *  limitations under the License.
 */
(function() {function i(a){throw a;}var k=void 0,n=!0,p=null,r=!1;function aa(){return function(){}}var s,u=this;function ba(a,b){var c=a.split("."),d=u;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&b!==k?d[e]=b:d=d[e]?d[e]:d[e]={}}
function ca(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function da(a){return"array"==ca(a)}function x(a){return"string"==typeof a}function z(a){return"number"==typeof a}function ea(a){var b=typeof a;return"object"==b&&a!=p||"function"==b}function fa(a){return a[ga]||(a[ga]=++ha)}var ga="closure_uid_"+Math.floor(2147483648*Math.random()).toString(36),ha=0;function ia(a,b,c){return a.call.apply(a.bind,arguments)}
function ja(a,b,c){a||i(Error());if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function ka(a,b,c){ka=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ia:ja;return ka.apply(p,arguments)}
function la(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,c);return a.apply(this,b)}}function A(a,b){function c(){}c.prototype=b.prototype;a.Jb=b.prototype;a.prototype=new c;a.prototype.constructor=a};function ma(a){return a.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")}function na(a){if(!oa.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(pa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(qa,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(ra,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(sa,"&quot;"));return a}var pa=/&/g,qa=/</g,ra=/>/g,sa=/\"/g,oa=/[&<>\"]/;var ta,ua,va,wa,xa;function ya(){return u.navigator?u.navigator.userAgent:p}function za(){return u.navigator}wa=va=ua=ta=r;var Aa;if(Aa=ya()){var Ba=za();ta=0==Aa.indexOf("Opera");ua=!ta&&-1!=Aa.indexOf("MSIE");va=!ta&&-1!=Aa.indexOf("WebKit");wa=!ta&&!va&&"Gecko"==Ba.product}var Ca=ta,B=ua,C=wa,D=va,Da=za();xa=-1!=(Da&&Da.platform||"").indexOf("Mac");var Ea=!!za()&&-1!=(za().appVersion||"").indexOf("X11"),Fa;
a:{var Ga="",Ha;if(Ca&&u.opera)var Ia=u.opera.version,Ga="function"==typeof Ia?Ia():Ia;else if(C?Ha=/rv\:([^\);]+)(\)|;)/:B?Ha=/MSIE\s+([^\);]+)(\)|;)/:D&&(Ha=/WebKit\/(\S+)/),Ha)var Ja=Ha.exec(ya()),Ga=Ja?Ja[1]:"";if(B){var Ka,La=u.document;Ka=La?La.documentMode:k;if(Ka>parseFloat(Ga)){Fa=String(Ka);break a}}Fa=Ga}var Ma={};
function E(a){var b;if(!(b=Ma[a])){b=0;for(var c=ma(String(Fa)).split("."),d=ma(String(a)).split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var g=c[f]||"",h=d[f]||"",j=RegExp("(\\d*)(\\D*)","g"),l=RegExp("(\\d*)(\\D*)","g");do{var m=j.exec(g)||["","",""],q=l.exec(h)||["","",""];if(0==m[0].length&&0==q[0].length)break;b=((0==m[1].length?0:parseInt(m[1],10))<(0==q[1].length?0:parseInt(q[1],10))?-1:(0==m[1].length?0:parseInt(m[1],10))>(0==q[1].length?0:parseInt(q[1],10))?1:0)||((0==m[2].length)<
(0==q[2].length)?-1:(0==m[2].length)>(0==q[2].length)?1:0)||(m[2]<q[2]?-1:m[2]>q[2]?1:0)}while(0==b)}b=Ma[a]=0<=b}return b}var Na={};function Oa(a){return Na[a]||(Na[a]=B&&!!document.documentMode&&document.documentMode>=a)};function Pa(a,b){for(var c in a)b.call(k,a[c],c,a)}var Qa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ra(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<Qa.length;f++)c=Qa[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}};var G=Array.prototype,Sa=G.indexOf?function(a,b,c){return G.indexOf.call(a,b,c)}:function(a,b,c){c=c==p?0:0>c?Math.max(0,a.length+c):c;if(x(a))return!x(b)||1!=b.length?-1:a.indexOf(b,c);for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},H=G.forEach?function(a,b,c){G.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)},Ta=G.filter?function(a,b,c){return G.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,g=x(a)?a.split(""):
a,h=0;h<d;h++)if(h in g){var j=g[h];b.call(c,j,h,a)&&(e[f++]=j)}return e},Ua=G.some?function(a,b,c){return G.some.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=x(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return n;return r};function Va(a,b){var c=Sa(a,b);0<=c&&G.splice.call(a,c,1)}function Wa(a,b,c){return 2>=arguments.length?G.slice.call(a,b):G.slice.call(a,b,c)};function I(a,b){return Math.min(Math.max(a,0),b)};function J(a,b){this.x=a!==k?a:0;this.y=b!==k?b:0}J.prototype.clone=function(){return new J(this.x,this.y)};J.prototype.toString=function(){return"("+this.x+", "+this.y+")"};function Xa(a,b){var c=a.x-b.x,d=a.y-b.y;return Math.sqrt(c*c+d*d)};function Ya(a,b){this.width=a;this.height=b}s=Ya.prototype;s.clone=function(){return new Ya(this.width,this.height)};s.toString=function(){return"("+this.width+" x "+this.height+")"};s.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};s.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};s.scale=function(a){this.width*=a;this.height*=a;return this};var Za;function $a(a){a=a.className;return x(a)&&a.match(/\S+/g)||[]}function ab(a,b){for(var c=$a(a),d=Wa(arguments,1),e=c.length+d.length,f=c,g=0;g<d.length;g++)0<=Sa(f,d[g])||f.push(d[g]);a.className=c.join(" ");return c.length==e}function bb(a,b){var c=$a(a),d=Wa(arguments,1),c=Ta(c,function(a){return!(0<=Sa(d,a))});a.className=c.join(" ")};var cb=!B||Oa(9),db=!C&&!B||B&&Oa(9)||C&&E("1.9.1");B&&E("9");function eb(a){return a?new fb(gb(a)):Za||(Za=new fb)}function hb(a,b){Pa(b,function(b,d){"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:d in ib?a.setAttribute(ib[d],b):0==d.lastIndexOf("aria-",0)||0==d.lastIndexOf("data-",0)?a.setAttribute(d,b):a[d]=b})}var ib={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};
function jb(a,b,c){var d=arguments,e=document,f=d[0],g=d[1];if(!cb&&g&&(g.name||g.type)){f=["<",f];g.name&&f.push(' name="',na(g.name),'"');if(g.type){f.push(' type="',na(g.type),'"');var h={};Ra(h,g);delete h.type;g=h}f.push(">");f=f.join("")}f=e.createElement(f);g&&(x(g)?f.className=g:da(g)?ab.apply(p,[f].concat(g)):hb(f,g));if(2<d.length)for(var j=e,l=f,e=function(a){a&&l.appendChild(x(a)?j.createTextNode(a):a)},g=2;g<d.length;g++){var m=d[g],h=ca(m);if(("array"==h||"object"==h&&"number"==typeof m.length)&&
!(ea(m)&&0<m.nodeType)){var q;a:{if(m&&"number"==typeof m.length){if(ea(m)){q="function"==typeof m.item||"string"==typeof m.item;break a}if("function"==ca(m)){q="function"==typeof m.item;break a}}q=r}h=H;if(q)if(q=m.length,0<q){for(var t=Array(q),y=0;y<q;y++)t[y]=m[y];m=t}else m=[];h(m,e)}else e(m)}return f}function gb(a){return 9==a.nodeType?a:a.ownerDocument||a.document}
function kb(a,b){if("textContent"in a)a.textContent=b;else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=b}else{for(var c;c=a.firstChild;)a.removeChild(c);a.appendChild(gb(a).createTextNode(b))}}function fb(a){this.ra=a||u.document||document}fb.prototype.createElement=function(a){return this.ra.createElement(a)};fb.prototype.createTextNode=function(a){return this.ra.createTextNode(a)};fb.prototype.appendChild=function(a,b){a.appendChild(b)};function lb(a,b,c){a.style[String(c).replace(/\-([a-z])/g,function(a,b){return b.toUpperCase()})]=b}function mb(a,b){var c;a:{c=gb(a);if(c.defaultView&&c.defaultView.getComputedStyle&&(c=c.defaultView.getComputedStyle(a,p))){c=c[b]||c.getPropertyValue(b)||"";break a}c=""}return c||(a.currentStyle?a.currentStyle[b]:p)||a.style&&a.style[b]}
function nb(a){var b=a.getBoundingClientRect();B&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}
function ob(a){if(B&&!Oa(8))return a.offsetParent;for(var b=gb(a),c=mb(a,"position"),d="fixed"==c||"absolute"==c,a=a.parentNode;a&&a!=b;a=a.parentNode)if(c=mb(a,"position"),d=d&&"static"==c&&a!=b.documentElement&&a!=b.body,!d&&(a.scrollWidth>a.clientWidth||a.scrollHeight>a.clientHeight||"fixed"==c||"absolute"==c||"relative"==c))return a;return p}
function qb(a){var b,c=gb(a),d=mb(a,"position"),e=C&&c.getBoxObjectFor&&!a.getBoundingClientRect&&"absolute"==d&&(b=c.getBoxObjectFor(a))&&(0>b.screenX||0>b.screenY),f=new J(0,0),g;b=c?gb(c):document;if(g=B)if(g=!Oa(9))g="CSS1Compat"!=eb(b).ra.compatMode;g=g?b.body:b.documentElement;if(a==g)return f;if(a.getBoundingClientRect)b=nb(a),c=eb(c).ra,a=!D&&"CSS1Compat"==c.compatMode?c.documentElement:c.body,c=c.parentWindow||c.defaultView,a=new J(c.pageXOffset||a.scrollLeft,c.pageYOffset||a.scrollTop),
f.x=b.left+a.x,f.y=b.top+a.y;else if(c.getBoxObjectFor&&!e)b=c.getBoxObjectFor(a),a=c.getBoxObjectFor(g),f.x=b.screenX-a.screenX,f.y=b.screenY-a.screenY;else{b=a;do{f.x+=b.offsetLeft;f.y+=b.offsetTop;b!=a&&(f.x+=b.clientLeft||0,f.y+=b.clientTop||0);if(D&&"fixed"==mb(b,"position")){f.x+=c.body.scrollLeft;f.y+=c.body.scrollTop;break}b=b.offsetParent}while(b&&b!=a);if(Ca||D&&"absolute"==d)f.y-=c.body.offsetTop;for(b=a;(b=ob(b))&&b!=c.body&&b!=g;)if(f.x-=b.scrollLeft,!Ca||"TR"!=b.tagName)f.y-=b.scrollTop}return f}
function rb(a,b){"number"==typeof a&&(a=(b?Math.round(a):a)+"px");return a}function sb(a){if("none"!=mb(a,"display"))return tb(a);var b=a.style,c=b.display,d=b.visibility,e=b.position;b.visibility="hidden";b.position="absolute";b.display="inline";a=tb(a);b.display=c;b.position=e;b.visibility=d;return a}function tb(a){var b=a.offsetWidth,c=a.offsetHeight,d=D&&!b&&!c;return(b===k||d)&&a.getBoundingClientRect?(a=nb(a),new Ya(a.right-a.left,a.bottom-a.top)):new Ya(b,c)};function ub(){0!=vb&&(this.cc=Error().stack,fa(this))}var vb=0;function wb(){ub.call(this);this.Q=[];this.Sa={}}A(wb,ub);wb.prototype.yb=1;wb.prototype.Oa=0;function xb(a,b,c){var d=a.Sa[b];d||(d=a.Sa[b]=[]);var e=a.yb;a.Q[e]=b;a.Q[e+1]=c;a.Q[e+2]=k;a.yb=e+3;d.push(e)}
wb.prototype.p=function(a,b){var c=this.Sa[a];if(c){this.Oa++;for(var d=Wa(arguments,1),e=0,f=c.length;e<f;e++){var g=c[e];this.Q[g+1].apply(this.Q[g+2],d)}this.Oa--;if(this.Ma&&0==this.Oa)for(;c=this.Ma.pop();)if(0!=this.Oa)this.Ma||(this.Ma=[]),this.Ma.push(c);else if(d=this.Q[c])(d=this.Sa[d])&&Va(d,c),delete this.Q[c],delete this.Q[c+1],delete this.Q[c+2]}};function yb(){}var zb=0;s=yb.prototype;s.key=0;s.na=r;s.ob=r;s.V=function(a,b,c,d,e,f){"function"==ca(a)?this.xb=n:a&&a.handleEvent&&"function"==ca(a.handleEvent)?this.xb=r:i(Error("Invalid listener argument"));this.Ia=a;this.proxy=b;this.src=c;this.type=d;this.capture=!!e;this.vb=f;this.ob=r;this.key=++zb;this.na=r};s.handleEvent=function(a){return this.xb?this.Ia.call(this.vb||this.src,a):this.Ia.handleEvent.call(this.Ia,a)};!B||Oa(9);var Ab=!B||Oa(9),Bb=B&&!E("9");!D||E("528");C&&E("1.9b")||B&&E("8")||Ca&&E("9.5")||D&&E("528");C&&!E("8")||B&&E("9");function Cb(a,b){this.type=a;this.currentTarget=this.target=b}s=Cb.prototype;s.Na=r;s.defaultPrevented=r;s.$b=n;s.stopPropagation=function(){this.Na=n};s.preventDefault=function(){this.defaultPrevented=n;this.$b=r};function Db(a){Db[" "](a);return a}Db[" "]=aa();function Eb(a,b){a&&this.V(a,b)}A(Eb,Cb);s=Eb.prototype;s.target=p;s.relatedTarget=p;s.offsetX=0;s.offsetY=0;s.clientX=0;s.clientY=0;s.screenX=0;s.screenY=0;s.button=0;s.keyCode=0;s.charCode=0;s.ctrlKey=r;s.altKey=r;s.shiftKey=r;s.metaKey=r;s.Zb=r;s.sa=p;
s.V=function(a,b){var c=this.type=a.type;Cb.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(C){var e;a:{try{Db(d.nodeName);e=n;break a}catch(f){}e=r}e||(d=p)}}else"mouseover"==c?d=a.fromElement:"mouseout"==c&&(d=a.toElement);this.relatedTarget=d;this.offsetX=D||a.offsetX!==k?a.offsetX:a.layerX;this.offsetY=D||a.offsetY!==k?a.offsetY:a.layerY;this.clientX=a.clientX!==k?a.clientX:a.pageX;this.clientY=a.clientY!==k?a.clientY:a.pageY;this.screenX=a.screenX||
0;this.screenY=a.screenY||0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||("keypress"==c?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Zb=xa?a.metaKey:a.ctrlKey;this.state=a.state;this.sa=a;a.defaultPrevented&&this.preventDefault();delete this.Na};s.stopPropagation=function(){Eb.Jb.stopPropagation.call(this);this.sa.stopPropagation?this.sa.stopPropagation():this.sa.cancelBubble=n};
s.preventDefault=function(){Eb.Jb.preventDefault.call(this);var a=this.sa;if(a.preventDefault)a.preventDefault();else if(a.returnValue=r,Bb)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var Fb={},K={},Gb={},Hb={};
function L(a,b,c,d,e){if(b){if(da(b)){for(var f=0;f<b.length;f++)L(a,b[f],c,d,e);return p}var d=!!d,g=K;b in g||(g[b]={N:0,ga:0});g=g[b];d in g||(g[d]={N:0,ga:0},g.N++);var g=g[d],h=fa(a),j;g.ga++;if(g[h]){j=g[h];for(f=0;f<j.length;f++)if(g=j[f],g.Ia==c&&g.vb==e){if(g.na)break;return j[f].key}}else j=g[h]=[],g.N++;var l=Ib,m=Ab?function(a){return l.call(m.src,m.key,a)}:function(a){a=l.call(m.src,m.key,a);if(!a)return a},f=m;f.src=a;g=new yb;g.V(c,f,a,b,d,e);c=g.key;f.key=c;j.push(g);Fb[c]=g;Gb[h]||
(Gb[h]=[]);Gb[h].push(g);a.addEventListener?(a==u||!a.Qb)&&a.addEventListener(b,f,d):a.attachEvent(b in Hb?Hb[b]:Hb[b]="on"+b,f);return c}i(Error("Invalid event type"))}function Jb(a){if(Fb[a]){var b=Fb[a];if(!b.na){var c=b.src,d=b.type,e=b.proxy,f=b.capture;c.removeEventListener?(c==u||!c.Qb)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(d in Hb?Hb[d]:Hb[d]="on"+d,e);c=fa(c);Gb[c]&&(e=Gb[c],Va(e,b),0==e.length&&delete Gb[c]);b.na=n;if(b=K[d][f][c])b.Ab=n,Kb(d,f,c,b);delete Fb[a]}}}
function Kb(a,b,c,d){if(!d.Ja&&d.Ab){for(var e=0,f=0;e<d.length;e++)d[e].na?d[e].proxy.src=p:(e!=f&&(d[f]=d[e]),f++);d.length=f;d.Ab=r;0==f&&(delete K[a][b][c],K[a][b].N--,0==K[a][b].N&&(delete K[a][b],K[a].N--),0==K[a].N&&delete K[a])}}function Lb(a,b,c,d,e){var f=1,b=fa(b);if(a[b]){a.ga--;a=a[b];a.Ja?a.Ja++:a.Ja=1;try{for(var g=a.length,h=0;h<g;h++){var j=a[h];j&&!j.na&&(f&=Mb(j,e)!==r)}}finally{a.Ja--,Kb(c,d,b,a)}}return Boolean(f)}function Mb(a,b){a.ob&&Jb(a.key);return a.handleEvent(b)}
function Ib(a,b){if(!Fb[a])return n;var c=Fb[a],d=c.type,e=K;if(!(d in e))return n;var e=e[d],f,g;if(!Ab){var h;if(!(h=b))a:{h=["window","event"];for(var j=u;f=h.shift();)if(j[f]!=p)j=j[f];else{h=p;break a}h=j}f=h;h=n in e;j=r in e;if(h){if(0>f.keyCode||f.returnValue!=k)return n;a:{var l=r;if(0==f.keyCode)try{f.keyCode=-1;break a}catch(m){l=n}if(l||f.returnValue==k)f.returnValue=n}}l=new Eb;l.V(f,this);f=n;try{if(h){for(var q=[],t=l.currentTarget;t;t=t.parentNode)q.push(t);g=e[n];g.ga=g.N;for(var y=
q.length-1;!l.Na&&0<=y&&g.ga;y--)l.currentTarget=q[y],f&=Lb(g,q[y],d,n,l);if(j){g=e[r];g.ga=g.N;for(y=0;!l.Na&&y<q.length&&g.ga;y++)l.currentTarget=q[y],f&=Lb(g,q[y],d,r,l)}}else f=Mb(c,l)}finally{q&&(q.length=0)}return f}d=new Eb(b,this);return f=Mb(c,d)};function M(a,b){this.canvas=a;this.id=b}s=M.prototype;s.ba=aa();s.ca=aa();s.da=aa();s.Ea=aa();s.ta=aa();function Nb(a,b){M.call(this,a,b);this.B=p}A(Nb,M);s=Nb.prototype;s.wa=function(){this.B=p};s.ba=function(a){this.B&&this.da(a);this.B=a;for(var b=0,c=this.canvas.D.length;b<c;b++)if(this.canvas.D[b].ja(a.x,a.y)){this.canvas.selected=this.canvas.D[b].id;N.p(Ob);N.p(O);return}this.canvas.selected=p;N.p(Ob);N.p(O)};s.ca=function(a){var b=this;this.B&&(H(Pb(this.canvas),function(c){c.Hb(new J(a.x-b.B.x,a.y-b.B.y))}),N.p(O))};
s.da=function(a){var b=this;if(this.B){var c=a.x-this.B.x,d=a.y-this.B.y;(2<Math.abs(c)||2<Math.abs(d))&&H(Pb(this.canvas),function(a){var f=a.kb(new J(c,d));f.id=a.id;P(b.canvas,new Qb(Rb,f))})}this.B=p};s.Ea=function(a){for(var b=0,c=this.canvas.D.length;b<c;b++)if(this.canvas.D[b].type()==Sb&&this.canvas.D[b].ja(a.x,a.y)){N.p(Q,Tb);break}};function Ub(a,b,c,d){this.x=a;this.y=b;this.f=c;this.i=d}function Vb(a,b,c,d){if(2==arguments.length)return Math.sqrt(a*a+b*b);var e=c-a,f=d-b;return Math.sqrt(e*e+f*f)}function Wb(a,b,c,d,e,f,g){for(var h=0,j=a,l=b,m,q,t,y,g=g||6,v=1;v<=g;v++)m=v/g,t=1-m,q=t*t,t*=2*m,y=m*m,m=q*a+t*c+y*e,q=q*b+t*d+y*f,h+=Vb(j,l,m,q),j=m,l=q;return h}function Xb(a,b,c,d,e,f,g,h){if(0==g)return Yb(a,b,c,d,e,f,h);if(1==h)return Zb(a,b,c,d,e,f,g);a=Yb(a,b,c,d,e,f,h);a.push(g/h);return Zb.apply(p,a)}
function Yb(a,b,c,d,e,f,g){g=g||1;1!=g&&(e=c+(e-c)*g,f=d+(f-d)*g,c=a+(c-a)*g,d=b+(d-b)*g,e=c+(e-c)*g,f=d+(f-d)*g);return[a,b,c,d,e,f]}function Zb(a,b,c,d,e,f,g){g=g||1;1!=g&&(a+=(c-a)*g,b+=(d-b)*g,c+=(e-c)*g,d+=(f-d)*g,a+=(c-a)*g,b+=(d-b)*g);return[a,b,c,d,e,f]}
function $b(a,b,c){var d=(c.x-b.x)*(c.x-b.x)+(c.y-b.y)*(c.y-b.y),e=((a.x-b.x)*(c.x-b.x)+(a.y-b.y)*(c.y-b.y))/d,d=Math.abs(((b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y))/d)*Math.sqrt(d);0<=e&&1>=e?a=d:(b=(a.x-b.x)*(a.x-b.x)+(a.y-b.y)*(a.y-b.y),a=(a.x-c.x)*(a.x-c.x)+(a.y-c.y)*(a.y-c.y),a=b<a?Math.sqrt(b):Math.sqrt(a));return a};function ac(a,b,c){this.Z=a;this.Nb=6;this.q=n;this.Da=this.t=this.o=this.overflow=0;this.n=p;this.t=b;this.o=c;this.Da=this.t+this.o;this.q=n;this.overflow=0;this.n={x:0,y:0}}s=ac.prototype;s.moveTo=function(a,b){R(this,a,b)};
s.lineTo=function(a,b){var c=a-this.n.x,d=b-this.n.y,e=Math.atan2(d,c),f=Math.cos(e),e=Math.sin(e),c=Vb(0,0,c,d);if(this.overflow){if(this.overflow>c){this.q?cc(this,a,b):R(this,a,b);this.overflow-=c;return}this.q?cc(this,this.n.x+f*this.overflow,this.n.y+e*this.overflow):R(this,this.n.x+f*this.overflow,this.n.y+e*this.overflow);c-=this.overflow;this.overflow=0;this.q=!this.q;if(!c)return}if(d=Math.floor(c/this.Da)){for(var g=f*this.t,h=e*this.t,j=f*this.o,l=e*this.o,m=0;m<d;m++)this.q?(cc(this,this.n.x+
g,this.n.y+h),R(this,this.n.x+j,this.n.y+l)):(R(this,this.n.x+j,this.n.y+l),cc(this,this.n.x+g,this.n.y+h));c-=this.Da*d}this.q?c>this.t?(cc(this,this.n.x+f*this.t,this.n.y+e*this.t),R(this,a,b),this.overflow=this.o-(c-this.t),this.q=r):(cc(this,a,b),c==this.t?(this.overflow=0,this.q=!this.q):(this.overflow=this.t-c,R(this,a,b))):c>this.o?(R(this,this.n.x+f*this.o,this.n.y+e*this.o),cc(this,a,b),this.overflow=this.t-(c-this.o),this.q=n):(R(this,a,b),c==this.o?(this.overflow=0,this.q=!this.q):this.overflow=
this.o-c)};
s.quadraticCurveTo=function(a,b,c,d){var e=this.n.x,f=this.n.y,g=Wb(e,f,a,b,c,d,this.Nb),h=0,j=0,l;if(this.overflow){if(this.overflow>g){this.q?dc(this,a,b,c,d):R(this,c,d);this.overflow-=g;return}h=this.overflow/g;l=Yb(e,f,a,b,c,d,h);this.q?dc(this,l[2],l[3],l[4],l[5]):R(this,l[4],l[5]);this.overflow=0;this.q=!this.q;if(!g)return}var m;m=Math.floor((g-g*h)/this.Da);var q=this.t/g,t=this.o/g;if(m)for(var y=0;y<m;y++)this.q?(j=h+q,l=Xb(e,f,a,b,c,d,h,j),dc(this,l[2],l[3],l[4],l[5]),h=j,j=h+t,l=Xb(e,
f,a,b,c,d,h,j),R(this,l[4],l[5])):(j=h+t,l=Xb(e,f,a,b,c,d,h,j),R(this,l[4],l[5]),h=j,j=h+q,l=Xb(e,f,a,b,c,d,h,j),dc(this,l[2],l[3],l[4],l[5])),h=j;m=g-g*h;this.q?m>this.t?(l=Xb(e,f,a,b,c,d,h,h+q),dc(this,l[2],l[3],l[4],l[5]),R(this,c,d),this.overflow=this.o-(m-this.t),this.q=r):(l=Zb(e,f,a,b,c,d,h),dc(this,l[2],l[3],l[4],l[5]),g==this.t?(this.overflow=0,this.q=!this.q):(this.overflow=this.t-m,R(this,c,d))):m>this.o?(j=h+t,l=Xb(e,f,a,b,c,d,h,j),R(this,l[4],l[5]),l=Zb(e,f,a,b,c,d,j),dc(this,l[2],l[3],
l[4],l[5]),this.overflow=this.t-(m-this.o),this.q=n):(R(this,c,d),m==this.o?(this.overflow=0,this.q=!this.q):this.overflow=this.o-m)};s.beginPath=function(){this.Z.beginPath()};s.stroke=function(){this.Z.stroke()};s.clearRect=function(a,b,c,d){this.Z.clearRect(a,b,c,d)};s.Fa=function(){this.n=this.Z=p};function R(a,b,c){a.n={x:b,y:c};a.Z.moveTo(b,c)}function cc(a,b,c){b==a.n.x&&c==a.n.y||(a.n={x:b,y:c},a.Z.lineTo(b,c))}
function dc(a,b,c,d,e){b==d&&c==e&&d==a.n.x&&e==a.n.y||(a.n={x:d,y:e},a.Z.quadraticCurveTo(b,c,d,e))};function ec(a){if(a)return fc[a]=n,a;a="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(a){var c=16*Math.random()|0;return("x"==a?c:c&3|8).toString(16)});return fc[a]?ec():ec(a)}var fc={};function gc(a,b){if(a==p)return p;b==p&&(b=0);if(100<b)return p;var c={};if("object"==typeof a){"undefined"!=typeof a.length&&(c=[]);for(var d in a){var e=typeof a[d];"object"==e?c[d]=a[d]instanceof HTMLElement?a[d]:gc(a[d],b+1):"string"==e?c[d]=a[d]:"number"==e?c[d]=a[d]:"function"==e?c[d]=a[d]:"boolean"==e?a[d]==n?c[d]=n:c[d]=r:"undefined"==e&&(c[d]=k)}}return c}
function hc(a,b){if("object"==typeof a&&"object"==typeof b){if(a==p&&b==p)return n;if(da(a)&&da(b)){if(a.length!=b.length)return r;for(var c=0;c<a.length;c++)if(!hc(a[c],b[c]))return r;return n}if(ea(a)&&ea(b)){for(c in a)if(!(c in(a.__proto__||a.constructor)||"__proto__"==c))if(!(c in b)||!hc(a[c],b[c]))return r;for(c in b)if(!(c in(b.__proto__||b.constructor)||"__proto__"==c)&&!(c in a))return r;return n}return r}return z(a)&&z(b)?1E-9>Math.abs(a-b):a==p&&b==p?n:a===b};var Sb=0;function ic(a){a=a||{};this.id=ec(a.id);this.e={};this.e[jc]=Sb;this.e[kc]=a.scale||1;this.e[lc]=a.color||"#ffff00";this.e[mc]=a.alpha||1;this.e[nc]=a.lineWidth||3;this.e[oc]=a.m||[];this.e[pc]=a.t||10;this.e[qc]=z(a.o)?a.o:10;this.e[rc]=a.T||r;this.type=S(this.e,jc);this.scale=S(this.e,kc);this.color=S(this.e,lc);this.alpha=S(this.e,mc);this.lineWidth=S(this.e,nc);this.m=S(this.e,oc);this.t=S(this.e,pc);this.o=S(this.e,qc);this.T=S(this.e,rc);this.offset=new J(0,0);this.X=[];sc(this)}
function tc(a,b,c,d,e,f){var g=[],h=Wb(a,b,c,d,e,f),j=0,l=0,m=Math.floor(h/10),h=10/h;if(m){for(var q=0;q<m;q++)l=j+h,j=Xb(a,b,c,d,e,f,j,l),g.push(new J(j[4],j[5])),j=l;g.push(new J(e,f))}return g}s=ic.prototype;s.kb=function(){var a=this,b=[];H(this.m(),function(c){b.push(new J(c.x+a.offset.x,c.y+a.offset.y))});this.offset.x=0;this.offset.y=0;return{m:b}};s.Hb=function(a){this.offset=a};
s.Fb=function(){var a={},b;for(b in this.e)a[b]=this.e[b];var c=[];a[oc]&&da(a[oc])&&(H(a[oc],function(a){c.push({x:a.x,y:a.y})}),a[oc]=c);return a};s.ub=function(){return{scale:this.scale(),color:this.color(),alpha:this.alpha(),lineWidth:this.lineWidth(),m:this.m(),t:this.t(),o:this.o(),T:this.T()}};
s.Gb=function(a){a.scale!==k&&this.scale(a.scale);a.color!==k&&this.color(a.color);a.alpha!==k&&this.alpha(a.alpha);a.lineWidth!==k&&this.lineWidth(a.lineWidth);a.m!==k&&this.m(a.m);a.t!==k&&this.t(a.t);a.o!==k&&this.o(a.o);a.T!==k&&this.T(a.T)};s.ja=function(a,b){for(var c=this.X,d=0,e=c.length-1;d<e;d++)if(10>$b(new J(a,b),c[d],c[d+1]))return n;return r};
function sc(a){var b=[];if(a.T()){var c=a.m(),d=c.length;H(c,function(a,f){if(0===f)b.push(new J(a.x,a.y));else{var g=c[f-1];1==f?b.push(new J((a.x+g.x)/2,(a.y+g.y)/2)):b=b.concat(tc(b[b.length-1].x,b[b.length-1].y,g.x,g.y,(a.x+g.x)/2,(a.y+g.y)/2));f==d-1&&b.push(new J(a.x,a.y))}})}else H(a.m(),function(a){b.push(new J(a.x,a.y))});a.X=b};function uc(a,b,c){M.call(this,a,b);this.X=[];this.u=this.ua=p;this.ha=c}A(uc,M);uc.prototype.ba=function(a){this.u&&this.u.m(vc(this));this.X.push(new J(a.x,a.y));this.u?P(this.canvas,new Qb(Rb,{id:this.u.id,m:vc(this)})):1<this.X.length?(this.ha.m([new J(0,0)]),a=new Qb(wc,{m:vc(this)}),P(this.canvas,a),this.u=this.canvas.getItem(a.z.id)):(this.ua=new J(a.x,a.y),this.ha.m(vc(this,this.ua)),N.p(O))};
uc.prototype.ca=function(a){var b=this.u||this.ha;b&&(this.ua=new J(a.x,a.y),b.m(vc(this,this.ua)),sc(b),N.p(O))};uc.prototype.ta=function(a){if(a.keyCode==xc&&this.u)return this.wa(),n};uc.prototype.wa=function(){this.u&&(this.u.m(vc(this)),sc(this.u),N.p(O));this.X=[];this.u=this.ua=p;this.ha.m([new J(0,0)])};function vc(a,b){return b?a.X.concat([b]):a.X.concat([])};var wc=2,Rb=4;function Qb(a,b){this.type=a;this.z=b;this.bb=p;this.$a=this.Za=r}Qb.prototype.copy=function(){return new Qb(this.type,gc(this.z))};function yc(a){var b=a.copy();switch(a.type){case 1:b.type=5;break;case wc:b.type=6;break;case 3:b.type=7;break;case Rb:b.z=gc(a.bb);break;case 5:b.type=1;break;case 6:b.type=wc;break;case 7:b.type=3;break;default:return p}return b};var zc=p;function T(a,b){var c=zc;if(c){var d=Pb(c);0<d.length?H(d,function(d){d.e[a]!==k&&(d.e[a]=b);d={id:d.id};d[a]=b;P(c,new Qb(Rb,d))}):c.e[a]=b}}function U(a){var b=zc;if(b){var c=Pb(b),d;0<c.length?Ua(c,function(b){return b.e[a]!==k?(d=b.e[a],n):r}):d=b.e[a];return d}}function S(a,b){return function(c){c!==k&&a[b]!==k&&(a[b]=c);return a[b]}}var jc="it",lc="ic",kc="is",mc="ia",nc="lw",oc="cp",rc="lc",qc="fl",pc="nl";function Ac(a,b){M.call(this,a,b);this.ea=this.I=this.u=this.B=p}A(Ac,M);s=Ac.prototype;s.cb=function(){var a=this;Ua(Pb(this.canvas),function(b){return b.type()==Sb?(a.u=b,N.p(O),n):r})};s.wa=function(){this.ea=this.I=this.u=this.B=p;N.p(O)};s.ba=function(a){this.B&&this.da(a);if(this.u){var b=this;Ua(this.u.m(),function(c){var d=a.x-c.x,e=a.y-c.y;return 100>d*d+e*e?(b.I=c,b.ea=c.clone(),n):r});this.I?this.B=a:N.p(Q,Bc)}};
s.ca=function(a){this.B&&(this.u&&this.I)&&(this.I.x=this.ea.x+a.x-this.B.x,this.I.y=this.ea.y+a.y-this.B.y,sc(this.u),N.p(O))};s.da=function(a){this.ca(a);if(this.B&&this.u&&this.I){var b=[];H(this.u.m(),function(a){b.push(a.clone())});this.I.x=this.ea.x;this.I.y=this.ea.y;P(this.canvas,new Qb(Rb,{id:this.u.id,m:b}))}this.ea=this.I=this.B=p};s.ta=function(a){if(a.keyCode==xc)return N.p(Q,Bc),n};function Cc(a,b){M.call(this,a,b);this.la=p}A(Cc,M);Cc.prototype.cb=function(a){this.la=z(a)?a:p};Cc.prototype.ba=function(a){this.la!==p&&P(this.canvas,new Qb(1,{type:this.la,x:a.x,y:a.y}))};function Dc(a,b){var c=this;this.ia=a;this.Tb=b;this.i=b.height;this.f=b.width;this.D=[];this.e={};this.selected=p;zc=this;this.ha=new ic({m:[new J(0,0)]});this.D.push(this.ha);this.W={};this.W[Bc]=new Nb(this,Bc);this.W[Ec]=new uc(this,Ec,this.ha);this.W[V]=new Cc(this,V);this.W[Tb]=new Ac(this,Tb);xb(N,Q,function(a,b){if(c.W[a]){var f=c.mode!=c.W[a]||p!=b;f&&(c.mode&&c.mode.wa)&&c.mode.wa();c.mode=c.W[a];f&&c.mode.cb&&c.mode.cb(b)}});this.mode=this.W.bc;this.Aa=[];this.xa=[];this.Ua=0;this.Ta=[];
setInterval(function(){Fc(c)},100)}s=Dc.prototype;s.removeItem=function(a){Va(this.D,a)};function Gc(a,b){var c=b.clientX,d=b.clientY,e=qb(a.ia.Ya.viewport);return new J(c-e.x,d-e.y)}function Fc(a){a.Ua=Math.max(0,a.Ua-1);0==a.Ua&&0<a.Ta.length&&(a.Aa.unshift(a.Ta),a.xa=[],a.Ta=[])}function Hc(a){if(0!==a.xa.length){var b=[];H(a.xa[0],function(c){c=yc(c);c!=p&&(c.Za=n,c.$a=r,b.unshift(c),P(a,c))});a.xa.shift();a.Aa.unshift(b)}}
function P(a,b){var c;switch(b.type){case 1:switch(b.z.type){case 1:c=new Ic(b.z);break;case 2:c=new Jc(b.z);break;case 3:c=new Kc(b.z);break;case 4:c=new Lc(b.z)}if(c)b.z.id=c.id,a.D.push(c);else return;break;case wc:if(b.z.m&&1<b.z.m.length)c=new ic(b.z),b.z.id=c.id,a.D.push(c);else return;break;case Rb:if(c=a.getItem(b.z.id)){if(!b.bb){var d=c.ub(),e={id:b.z.id},f;for(f in b.z)d[f]!==k&&(e[f]=d[f]);b.bb=e}c.Gb(b.z)}else return;break;case 5:case 6:if(c=a.getItem(b.z.id))a.removeItem(c);else return;
break;default:return}a.Ua++;!b.$a&&!b.Za&&a.Ta.unshift(b);Fc(a);N.p(O)}function Pb(a){return!a.selected?[]:(a=a.getItem(a.selected))?[a]:[]}s.getItem=function(a){var b=this.D,c;a:{c=function(b){return b.id==a};for(var d=b.length,e=x(b)?b.split(""):b,f=0;f<d;f++)if(f in e&&c.call(k,e[f])){c=f;break a}c=-1}return 0>c?p:x(b)?b.charAt(c):b[c]};s.ba=function(a){this.mode.ba(Gc(this,a))};s.ca=function(a){this.mode.ca(Gc(this,a))};s.da=function(a){this.mode.da(Gc(this,a))};
s.Ea=function(a){this.mode.Ea(Gc(this,a))};s.ta=function(a){return this.mode.ta(a)};function W(a){if(x(a)){var b=jb("SPAN");kb(b,a);return b}a.A=a.A||"DIV";var c=jb(a.A),d={id:a.id,"class":a.d,type:a.type,src:a.src,href:a.href,title:a.title,name:a.name,target:a.target,checked:a.checked,value:a.value},e={},f=r;for(b in d)d[b]!==k&&(e[b]=d[b],f=n);if(a.attr)for(b in a.attr)e[b]=a.attr[b],f=n;f&&hb(c,e);a.html&&(c.innerHTML=a.html);a.text&&kb(c,a.text);if(a.css)for(b in a.css)c.style[b]=a.css[b];if(a.children)for(b=0;b<a.children.length;b++)a.children[b]&&(d=W(a.children[b]),c.appendChild(d));
a.create&&a.create(c);a.click&&L(c,"click",function(b){a.click(b,c)});a.change&&L(c,"change",function(b){a.change(b,c)});return c};var Mc;Mc=function(){return n};/*
 Portions of this code are from the Dojo Toolkit, received by
 The Closure Library Authors under the BSD license. All other code is
 Copyright 2005-2009 The Closure Library Authors. All Rights Reserved.

The "New" BSD License:

Copyright (c) 2005-2009, The Dojo Foundation
All rights reserved.

Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are met:

 Redistributions of source code must retain the above copyright notice, this
    list of conditions and the following disclaimer.
 Redistributions in binary form must reproduce the above copyright notice,
    this list of conditions and the following disclaimer in the documentation
    and/or other materials provided with the distribution.
 Neither the name of the Dojo Foundation nor the names of its contributors
    may be used to endorse or promote products derived from this software
    without specific prior written permission.

THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE
FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER
CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,
OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/
function Nc(a,b){var c=b||[];a&&c.push(a);return c}var Oc=D&&"BackCompat"==document.compatMode,Pc=document.firstChild.children?"children":"childNodes",Qc=r;
function Rc(a){function b(){0<=l&&(w.id=c(l,v).replace(/\\/g,""),l=-1);if(0<=m){var a=m==v?p:c(m,v);0>">~+".indexOf(a)?w.A=a:w.La=a;m=-1}0<=j&&(w.d.push(c(j+1,v).replace(/\\/g,"")),j=-1)}function c(b,c){return ma(a.slice(b,c))}for(var a=0<=">~+".indexOf(a.slice(-1))?a+" * ":a+" ",d=[],e=-1,f=-1,g=-1,h=-1,j=-1,l=-1,m=-1,q="",t="",y,v=0,pb=a.length,w=p,F=p;q=t,t=a.charAt(v),v<pb;v++)if("\\"!=q)if(w||(y=v,w={ma:p,fa:[],Ca:[],d:[],A:p,La:p,id:p,Xa:function(){return Qc?this.Yb:this.A}},m=v),0<=e)if("]"==
t){F.attr?F.ab=c(g||e+1,v):F.attr=c(e+1,v);if((e=F.ab)&&('"'==e.charAt(0)||"'"==e.charAt(0)))F.ab=e.slice(1,-1);w.Ca.push(F);F=p;e=g=-1}else"="==t&&(g=0<="|~^$*".indexOf(q)?q:"",F.type=g+t,F.attr=c(e+1,v-g.length),g=v+1);else 0<=f?")"==t&&(0<=h&&(F.value=c(f+1,v)),h=f=-1):"#"==t?(b(),l=v+1):"."==t?(b(),j=v):":"==t?(b(),h=v):"["==t?(b(),e=v,F={}):"("==t?(0<=h&&(F={name:c(h+1,v),value:p},w.fa.push(F)),f=v):" "==t&&q!=t&&(b(),0<=h&&w.fa.push({name:c(h+1,v)}),w.zb=w.fa.length||w.Ca.length||w.d.length,
w.ec=w.ma=c(y,v),w.Yb=w.A=w.La?p:w.A||"*",w.A&&(w.A=w.A.toUpperCase()),d.length&&d[d.length-1].La&&(w.wb=d.pop(),w.ma=w.wb.ma+" "+w.ma),d.push(w),w=p);return d}function Sc(a,b){return!a?b:!b?a:function(){return a.apply(window,arguments)&&b.apply(window,arguments)}}function Tc(a){return 1==a.nodeType}function Uc(a,b){return!a?"":"class"==b?a.className||"":"for"==b?a.htmlFor||"":"style"==b?a.style.cssText||"":(Qc?a.getAttribute(b):a.getAttribute(b,2))||""}
var Vc={"*=":function(a,b){return function(c){return 0<=Uc(c,a).indexOf(b)}},"^=":function(a,b){return function(c){return 0==Uc(c,a).indexOf(b)}},"$=":function(a,b){return function(c){c=" "+Uc(c,a);return c.lastIndexOf(b)==c.length-b.length}},"~=":function(a,b){var c=" "+b+" ";return function(b){return 0<=(" "+Uc(b,a)+" ").indexOf(c)}},"|=":function(a,b){b=" "+b;return function(c){c=" "+Uc(c,a);return c==b||0==c.indexOf(b+"-")}},"=":function(a,b){return function(c){return Uc(c,a)==b}}},Wc="undefined"==
typeof document.firstChild.nextElementSibling,Xc=!Wc?"nextElementSibling":"nextSibling",Yc=!Wc?"previousElementSibling":"previousSibling",Zc=Wc?Tc:Mc;function $c(a){for(;a=a[Yc];)if(Zc(a))return r;return n}function ad(a){for(;a=a[Xc];)if(Zc(a))return r;return n}function bd(a){var b=a.parentNode,c=0,d=b[Pc],e=a._i||-1,f=b._l||-1;if(!d)return-1;d=d.length;if(f==d&&0<=e&&0<=f)return e;b._l=d;e=-1;for(b=b.firstElementChild||b.firstChild;b;b=b[Xc])Zc(b)&&(b._i=++c,a===b&&(e=c));return e}
function cd(a){return!(bd(a)%2)}function dd(a){return bd(a)%2}
var fd={checked:function(){return function(a){return a.checked||a.attributes.checked}},"first-child":function(){return $c},"last-child":function(){return ad},"only-child":function(){return function(a){return!$c(a)||!ad(a)?r:n}},empty:function(){return function(a){for(var b=a.childNodes,a=a.childNodes.length-1;0<=a;a--){var c=b[a].nodeType;if(1===c||3==c)return r}return n}},contains:function(a,b){var c=b.charAt(0);if('"'==c||"'"==c)b=b.slice(1,-1);return function(a){return 0<=a.innerHTML.indexOf(b)}},
not:function(a,b){var c=Rc(b)[0],d={J:1};"*"!=c.A&&(d.A=1);c.d.length||(d.d=1);var e=ed(c,d);return function(a){return!e(a)}},"nth-child":function(a,b){if("odd"==b)return dd;if("even"==b)return cd;if(-1!=b.indexOf("n")){var c=b.split("n",2),d=c[0]?"-"==c[0]?-1:parseInt(c[0],10):1,e=c[1]?parseInt(c[1],10):0,f=0,g=-1;0<d?0>e?e=e%d&&d+e%d:0<e&&(e>=d&&(f=e-e%d),e%=d):0>d&&(d*=-1,0<e&&(g=e,e%=d));if(0<d)return function(a){a=bd(a);return a>=f&&(0>g||a<=g)&&a%d==e};b=e}var h=parseInt(b,10);return function(a){return bd(a)==
h}}},gd=B?function(a){var b=a.toLowerCase();"class"==b&&(a="className");return function(c){return Qc?c.getAttribute(a):c[a]||c[b]}}:function(a){return function(b){return b&&b.getAttribute&&b.hasAttribute(a)}};
function ed(a,b){if(!a)return Mc;var b=b||{},c=p;b.J||(c=Sc(c,Tc));b.A||"*"!=a.A&&(c=Sc(c,function(b){return b&&b.tagName==a.Xa()}));b.d||H(a.d,function(a,b){var f=RegExp("(?:^|\\s)"+a+"(?:\\s|$)");c=Sc(c,function(a){return f.test(a.className)});c.count=b});b.fa||H(a.fa,function(a){var b=a.name;fd[b]&&(c=Sc(c,fd[b](b,a.value)))});b.Ca||H(a.Ca,function(a){var b,f=a.attr;a.type&&Vc[a.type]?b=Vc[a.type](f,a.ab):f.length&&(b=gd(f));b&&(c=Sc(c,b))});b.id||a.id&&(c=Sc(c,function(b){return!!b&&b.id==a.id}));
c||"default"in b||(c=Mc);return c}var hd={};
function id(a){var b=hd[a.ma];if(b)return b;var c=a.wb,c=c?c.La:"",d=ed(a,{J:1}),e="*"==a.A,f=document.getElementsByClassName;if(c)if(f={J:1},e&&(f.A=1),d=ed(a,f),"+"==c)var g=d,b=function(a,b,c){for(;a=a[Xc];)if(!Wc||Tc(a)){(!c||jd(a,c))&&g(a)&&b.push(a);break}return b};else if("~"==c)var h=d,b=function(a,b,c){for(a=a[Xc];a;){if(Zc(a)){if(c&&!jd(a,c))break;h(a)&&b.push(a)}a=a[Xc]}return b};else{if(">"==c)var j=d,j=j||Mc,b=function(a,b,c){for(var d=0,e=a[Pc];a=e[d++];)Zc(a)&&((!c||jd(a,c))&&j(a,d))&&
b.push(a);return b}}else if(a.id)d=!a.zb&&e?Mc:ed(a,{J:1,id:1}),b=function(b,c){var e;e=eb(b);var f=a.id;if(f=(e=x(f)?e.ra.getElementById(f):f)&&d(e))if(!(f=9==b.nodeType)){for(f=e.parentNode;f&&f!=b;)f=f.parentNode;f=!!f}if(f)return Nc(e,c)};else if(f&&/\{\s*\[native code\]\s*\}/.test(String(f))&&a.d.length&&!Oc)var d=ed(a,{J:1,d:1,id:1}),l=a.d.join(" "),b=function(a,b){for(var c=Nc(0,b),e,f=0,g=a.getElementsByClassName(l);e=g[f++];)d(e,a)&&c.push(e);return c};else!e&&!a.zb?b=function(b,c){for(var d=
Nc(0,c),e,f=0,g=b.getElementsByTagName(a.Xa());e=g[f++];)d.push(e);return d}:(d=ed(a,{J:1,A:1,id:1}),b=function(b,c){for(var e=Nc(0,c),f,g=0,h=b.getElementsByTagName(a.Xa());f=h[g++];)d(f,b)&&e.push(f);return e});return hd[a.ma]=b}var kd={},ld={};
function md(a){var b=Rc(ma(a));if(1==b.length){var c=id(b[0]);return function(a){if(a=c(a,[]))a.Ka=n;return a}}return function(a){for(var a=Nc(a),c,f,g=b.length,h,j,l=0;l<g;l++){j=[];c=b[l];f=a.length-1;0<f&&(h={},j.Ka=n);f=id(c);for(var m=0;c=a[m];m++)f(c,j,h);if(!j.length)break;a=j}return j}}var nd=!!document.querySelectorAll&&(!D||E("526"));
function od(a,b){if(nd){var c=ld[a];if(c&&!b)return c}if(c=kd[a])return c;var c=a.charAt(0),d=-1==a.indexOf(" ");0<=a.indexOf("#")&&d&&(b=n);if(nd&&!b&&-1==">~+".indexOf(c)&&(!B||-1==a.indexOf(":"))&&!(Oc&&0<=a.indexOf("."))&&-1==a.indexOf(":contains")&&-1==a.indexOf("|=")){var e=0<=">~+".indexOf(a.charAt(a.length-1))?a+" *":a;return ld[a]=function(b){try{9==b.nodeType||d||i("");var c=b.querySelectorAll(e);B?c.Pb=n:c.Ka=n;return c}catch(f){return od(a,n)(b)}}}var f=a.split(/\s*,\s*/);return kd[a]=
2>f.length?md(a):function(a){for(var b=0,c=[],d;d=f[b++];)c=c.concat(md(d)(a));return c}}var pd=0,qd=B?function(a){return Qc?a.getAttribute("_uid")||a.setAttribute("_uid",++pd)||pd:a.uniqueID}:function(a){return a._uid||(a._uid=++pd)};function jd(a,b){if(!b)return 1;var c=qd(a);return!b[c]?b[c]=1:0}
function rd(a){if(a&&a.Ka)return a;var b=[];if(!a||!a.length)return b;a[0]&&b.push(a[0]);if(2>a.length)return b;pd++;if(B&&Qc){var c=pd+"";a[0].setAttribute("_zipIdx",c);for(var d=1,e;e=a[d];d++)a[d].getAttribute("_zipIdx")!=c&&b.push(e),e.setAttribute("_zipIdx",c)}else if(B&&a.Pb)try{for(d=1;e=a[d];d++)Tc(e)&&b.push(e)}catch(f){}else{a[0]&&(a[0]._zipIdx=pd);for(d=1;e=a[d];d++)a[d]._zipIdx!=pd&&b.push(e),e._zipIdx=pd}return b}
function sd(a,b){if(!a)return[];if(a.constructor==Array)return a;if(!x(a))return[a];if(x(b)&&(b=x(b)?document.getElementById(b):b,!b))return[];var b=b||document,c=b.ownerDocument||b.documentElement;Qc=b.contentType&&"application/xml"==b.contentType||Ca&&(b.doctype||"[object XMLDocument]"==c.toString())||!!c&&(B?c.xml:b.xmlVersion||c.xmlVersion);return(c=od(a)(b))&&c.Ka?c:rd(c)}sd.fa=fd;ba("goog.dom.query",sd);ba("goog.dom.query.pseudos",sd.fa);var td={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function ud(a){var b={},a=String(a),c="#"==a.charAt(0)?a:"#"+a;if(vd.test(c))return b.C=wd(c),b.type="hex",b;a:{var d=a.match(xd);if(d){var c=Number(d[1]),e=Number(d[2]),d=Number(d[3]);if(0<=c&&255>=c&&0<=e&&255>=e&&0<=d&&255>=d){c=[c,e,d];break a}}c=[]}if(c.length)return b.C=yd(c),b.type="rgb",b;if(td&&(c=td[a.toLowerCase()]))return b.C=c,b.type="named",b;i(Error(a+" is not a valid color string"))}var zd=/#(.)(.)(.)/;
function wd(a){vd.test(a)||i(Error("'"+a+"' is not a valid hex color"));4==a.length&&(a=a.replace(zd,"#$1$1$2$2$3$3"));return a.toLowerCase()}function Ad(a,b,c){a=Number(a);b=Number(b);c=Number(c);(isNaN(a)||0>a||255<a||isNaN(b)||0>b||255<b||isNaN(c)||0>c||255<c)&&i(Error('"('+a+","+b+","+c+'") is not a valid RGB color'));return"#"+Bd(a.toString(16))+Bd(b.toString(16))+Bd(c.toString(16))}function yd(a){return Ad(a[0],a[1],a[2])}
function Cd(a,b,c){0>c?c+=1:1<c&&(c-=1);return 1>6*c?a+6*(b-a)*c:1>2*c?b:2>3*c?a+6*(b-a)*(2/3-c):a}function Dd(a,b,c){var d=0,e=0,f=0,a=a/360;if(0==b)d=e=f=255*c;else var g=f=0,g=0.5>c?c*(1+b):c+b-b*c,f=2*c-g,d=255*Cd(f,g,a+1/3),e=255*Cd(f,g,a),f=255*Cd(f,g,a-1/3);return[Math.round(d),Math.round(e),Math.round(f)]}var vd=/^#(?:[0-9a-f]{3}){1,2}$/i,xd=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;function Bd(a){return 1==a.length?"0"+a:a};function Ed(a){var b={},a=String(a),c="#"==a.charAt(0)?a:"#"+a;if(Fd.test(c))return b.C=Gd(c),b.type="hex",b;a:{var d=a.match(Hd);if(d){var c=Number(d[1]),e=Number(d[2]),f=Number(d[3]),d=Number(d[4]);if(0<=c&&255>=c&&0<=e&&255>=e&&0<=f&&255>=f&&0<=d&&1>=d){c=[c,e,f,d];break a}}c=[]}if(c.length)return b.C=Id(c),b.type="rgba",b;a:{if(d=a.match(Jd))if(c=Number(d[1]),e=Number(d[2]),f=Number(d[3]),d=Number(d[4]),0<=c&&360>=c&&0<=e&&100>=e&&0<=f&&100>=f&&0<=d&&1>=d){f=[c,e,f,d];break a}f=[]}if(f.length)return a=
f[0],c=f[1],e=f[2],f=f[3],d=Math.floor(255*f),(isNaN(d)||0>d||255<d)&&i(Error('"('+a+","+c+","+e+","+f+'") is not a valid HSLA color')),f=Bd(d.toString(16)),a=yd(Dd(a,c/100,e/100))+f,b.C=a,b.type="hsla",b;i(Error(a+" is not a valid color string"))}var Kd=/#(.)(.)(.)(.)/;function Gd(a){Fd.test(a)||i(Error("'"+a+"' is not a valid alpha hex color"));5==a.length&&(a=a.replace(Kd,"#$1$1$2$2$3$3$4$4"));return a.toLowerCase()}
function Ld(a){a=Gd(a);return[parseInt(a.substr(1,2),16),parseInt(a.substr(3,2),16),parseInt(a.substr(5,2),16),parseInt(a.substr(7,2),16)/255]}function Id(a){var b=a[0],c=a[1],d=a[2],a=a[3],e=Math.floor(255*a);(isNaN(e)||0>e||255<e)&&i(Error('"('+b+","+c+","+d+","+a+'") is not a valid RGBA color'));a=Bd(e.toString(16));return Ad(b,c,d)+a}var Fd=/^#(?:[0-9a-f]{4}){1,2}$/i,Hd=/^(?:rgba)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|1|0\.\d{0,10})\)$/i,Jd=/^(?:hsla)\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\%,\s?(0|[1-9]\d{0,2})\%,\s?(0|1|0\.\d{0,10})\)$/i;function Md(a,b){b=b||"#ffffff";a=a||b;x(a)||i(Error(a+" is not a valid 6-hex color string"));7<a.length&&"#"==a[0]&&(a=a.substr(0,7));7<b.length&&"#"==b[0]&&(b=b.substr(0,7));try{return ud(a)}catch(c){return Md(b,"#ffffff")}}function Nd(a,b){b=b||"#ffffff";a=a||b;x(a)||i(Error(a+" is not a valid 8-hex color string"));try{return Ed(a)}catch(c){try{var d=Md(a,b).C;return Nd(d+"ff",b+"ff")}catch(e){return Nd(b,"#ffffffff")}}}
function Od(a){var b;b=0.5;for(var a=ud(a).C,a=wd(a),a=[parseInt(a.substr(1,2),16),parseInt(a.substr(3,2),16),parseInt(a.substr(5,2),16)],c=[[0,0,0],[255,255,255]],d=[],e=0;e<c.length;e++)d.push({color:c[e],rb:Math.abs(Math.round((299*c[e][0]+587*c[e][1]+114*c[e][2])/1E3)-Math.round((299*a[0]+587*a[1]+114*a[2])/1E3))+(Math.abs(c[e][0]-a[0])+Math.abs(c[e][1]-a[1])+Math.abs(c[e][2]-a[2]))});d.sort(function(a,b){return b.rb-a.rb});a=d[0].color;return 1>b?(a.push(b),b=a[0],c=a[1],d=a[2],a=a[3],(isNaN(b)||
0>b||255<b||isNaN(c)||0>c||255<c||isNaN(d)||0>d||255<d||isNaN(a)||0>a||1<a)&&i(Error('"('+b+","+c+","+d+","+a+')" is not a valid RGBA color')),"rgba("+[b,c,d,a].join()+")"):yd(a)}
function X(a,b){this.Wb=n;this.R=this.K=this.L=this.M=0;!a&&b&&(a=b);a&&(x(a)?("transparent"==a.toLowerCase()&&(a="#0000"),Pd(this,a)):da(a)&&3<=a.length?Qd(this,[a[0],a[1],a[2],z(a[3])?a[3]:1]):a.Wb?this.clone(a):ea(a)&&("h"in a&&"s"in a&&"v"in a?Rd(this,[a.h,a.s,a.v,z(a.a)?a.a:1]):"h"in a&&"s"in a&&"l"in a?Sd(this,[a.h,a.s,a.l,z(a.a)?a.a:1]):"r"in a&&("g"in a&&"b"in a)&&Qd(this,[a.r,a.g,a.b,z(a.a)?a.a:1])))}X.prototype.clone=function(a){this.M=a.M;this.L=a.L;this.K=a.K;this.R=a.R;return this};
X.prototype.C=function(a){return a===k?yd(Td(this)):Pd(this,a)};function Pd(a,b){if(b===k)return Id(Qd(a));var c=Ld(Nd(b).C);a.M=c[0];a.L=c[1];a.K=c[2];a.R=c[3];return a}function Td(a){return[a.M,a.L,a.K]}function Qd(a,b){if(b===k)return[a.M,a.L,a.K,a.R];a.M=I(Math.round(b[0]),255);a.L=I(Math.round(b[1]),255);a.K=I(Math.round(b[2]),255);a.R=I(z(b[3])?b[3]:1,1);return a}
function Sd(a,b){var c;if(b===k){c=a.M/255;var d=a.L/255,e=a.K/255,f=Math.max(c,d,e),g=Math.min(c,d,e),h=0,j=0,l=0.5*(f+g);f!=g&&(f==c?h=60*(d-e)/(f-g):f==d?h=60*(e-c)/(f-g)+120:f==e&&(h=60*(c-d)/(f-g)+240),j=0<l&&0.5>=l?(f-g)/(2*l):(f-g)/(2-2*l));c=[Math.round(h+360)%360,j,l]}else b===k?c=Sd(a).concat([a.R]):(d=I(Math.round(360+b[0])%360,360),e=I(b[1],1),f=I(b[2],1),c=I(z(b[3])?b[3]:1,1),d=Dd(d,e,f),a.M=d[0],a.L=d[1],a.K=d[2],a.R=c,c=a);return c}
function Rd(a,b){if(b===k){var c,d=Td(a);c=d[0];var e=d[1],f=d[2],d=Math.max(Math.max(c,e),f),g=Math.min(Math.min(c,e),f);if(g==d)g=c=0;else{var h=d-g,g=h/d;c=60*(c==d?(e-f)/h:e==d?2+(f-c)/h:4+(c-e)/h);0>c&&(c+=360);360<c&&(c-=360)}c=[c,g,d];c[0]=Sd(a)[0];c[2]/=255}else{var j=I(Math.round(360+b[0])%360,360),e=I(b[1],1),d=I(b[2],1);c=I(z(b[3])?b[3]:1,1);d=I(Math.round(255*d),255);h=g=f=0;if(0==e)h=g=f=d;else{var l=Math.floor(j/60),m=j/60-l,j=d*(1-e),q=d*(1-e*m),e=d*(1-e*(1-m));switch(l){case 1:f=q;
g=d;h=j;break;case 2:f=j;g=d;h=e;break;case 3:f=j;g=q;h=d;break;case 4:f=e;g=j;h=d;break;case 5:f=d;g=j;h=q;break;case 6:case 0:f=d,g=e,h=j}}e=[Math.floor(f),Math.floor(g),Math.floor(h)];a.M=e[0];a.L=e[1];a.K=e[2];a.R=c}};function Ud(){var a=this;this.visible=r;this.ic=p;this.gc=[];this.hc=12;this.Ra=p;this.k=W({d:"callout hidden",children:[{d:"callout-bubble",create:function(b){a.mb=b},children:[{d:"simple-color-picker",children:[{d:"preview-swatch",create:function(b){a.eb=b}},{d:"input-container",children:[{A:"input",type:"text",d:"box-sizing-border",create:function(b){a.Db=b},change:function(b,c){try{var d=new X(Md(c.value).C);Vd(a,d)}catch(e){Wd(a,a.ya)}}}]},{d:"button-container",children:[{A:"button",text:"Done",
click:function(){(!a.pa||a.pa(a.ya)!=r)&&a.hide()}}]},{d:"spacer"},{d:"swatch-container",create:function(b){a.Ra=b}}]}]},{d:"callout-pointer-border"},{d:"callout-pointer"}]});L(this.mb,"mousedown",function(a){a.stopPropagation()});L(this.mb,"mouseout",function(){Xd(a,a.za);Wd(a,a.ya)});this.hb={};this.pa=this.ya=this.za=p;this.Va();xb(N,Yd,function(){a.hide()})}
function Wd(a,b){b&&0<Qd(b)[3]?(bb(a.eb,"transparent"),a.eb.style.backgroundColor=b.C(),a.Db.value=b.C()):(ab(a.eb,"transparent"),a.Db.value="transparent")}function Xd(a,b){H(sd(".selected",a.Ra),function(a){bb(a,"selected")});b&&ab(b,"selected")}function Vd(a,b){b?(a.za=a.hb[b.C().toLowerCase()]||p,a.ya=new X(b.C()),a.za&&Xd(a,a.za),Wd(a,b)):(a.za=p,a.ya=p)}
Ud.prototype.Va=function(){var a;this.hb={};var b=new X;Zd(this,p);for(a=0;11>a;a++)Rd(b,[0,0,(10-a)/10]),Zd(this,Td(b));for(var c=0;9>c;c++)for(a=0;360>a;a+=30)Sd(b,[a,1,(9-c)/10]),Zd(this,Td(b));a=W({d:"clear"});this.Ra.appendChild(a)};
function Zd(a,b){var c=W({d:"swatch"+(b?"":" transparent"),css:{backgroundColor:b?"rgb("+Math.round(b[0])+","+Math.round(b[1])+","+Math.round(b[2])+")":"transparent"},create:function(c){var e=p;b&&(e=new X(b),a.hb[e.C().toLowerCase()]=c);L(c,"mouseover",function(){Xd(a,c);Wd(a,e)});L(c,"click",function(){(!a.pa||a.pa(e)!==r)&&a.hide()})}});a.Ra.appendChild(c)}
Ud.prototype.show=function(a,b,c,d){N.p(Yd);this.pa=c;Vd(this,d);this.visible=n;this.k.style.display="block";var e;if(c=this.k.offsetParent)if(d="HTML"==c.tagName||"BODY"==c.tagName,!d||"static"!=mb(c,"position"))e=qb(c),d||(d=(d="rtl"==mb(c,"direction"))&&C?-c.scrollLeft:d&&(!B||!E("8"))?c.scrollWidth-c.clientWidth-c.scrollLeft:c.scrollLeft,c=new J(d,c.scrollTop),e=new J(e.x-c.x,e.y-c.y));e=e||new J;c=this.k;a-=e.x;d=b-e.y;e=C&&(xa||Ea)&&E("1.9");a instanceof J?(b=a.x,a=a.y):(b=a,a=d);c.style.left=
rb(b,e);c.style.top=rb(a,e)};Ud.prototype.hide=function(){this.visible=r;this.k.style.display="none"};function Y(a){a=a||{};this.id=ec(a.id);this.e={};this.e[jc]=p;this.e[kc]=a.scale||1;this.e[lc]=a.color||"#ffff00";this.e[mc]=a.alpha||1;this.e[nc]=a.lineWidth||3;this.e.x=a.x||0;this.e.y=a.y||0;this.e.w=a.f||18;this.e.h=a.i||18;this.type=S(this.e,jc);this.scale=S(this.e,kc);this.color=S(this.e,lc);this.alpha=S(this.e,mc);this.lineWidth=S(this.e,nc);this.x=S(this.e,"x");this.y=S(this.e,"y");this.f=S(this.e,"w");this.i=S(this.e,"h");this.offset=new J(0,0)}s=Y.prototype;
s.kb=function(){var a={x:this.x()+this.offset.x,y:this.y()+this.offset.y};this.offset.x=0;this.offset.y=0;return a};s.Hb=function(a){this.offset.x=a.x;this.offset.y=a.y};s.Fb=function(){var a={},b;for(b in this.e)a[b]=this.e[b];return a};s.ub=function(){return{scale:this.scale(),color:this.color(),alpha:this.alpha(),x:this.x(),y:this.y(),f:this.f(),i:this.i()}};
s.Gb=function(a){a.scale!==k&&this.scale(a.scale);a.color!==k&&this.color(a.color);a.alpha!==k&&this.alpha(a.alpha);a.x!==k&&this.x(a.x);a.y!==k&&this.y(a.y);a.f!==k&&this.f(a.f);a.i!==k&&this.i(a.i)};function Z(a){this.c=a;this.padding=10;this.aa=this.$=p;this.canvas=document.createElement("CANVAS");this.canvas.width=this.c.f()+2*this.padding;this.canvas.height=this.c.i()+2*this.padding;this.canvas.style.position="absolute"}Z.prototype.O=aa();
Z.prototype.ib=function(a){var a=a||1,b=a*this.c.scale(),c=Math.round(b*this.c.f())+2*this.padding,b=Math.round(b*this.c.i())+2*this.padding;this.canvas.style.left=Math.round(a*(this.c.x()+this.c.offset.x)-c/2)+"px";this.canvas.style.top=Math.round(a*(this.c.y()+this.c.offset.y)-b/2)+"px"};
Z.prototype.Y=function(a,b){var a=a||1,c=a*this.c.scale(),d={f:this.c.f(),i:this.c.i(),color:this.c.color(),alpha:this.c.alpha(),scale:c,selected:b},e={x:this.c.x(),y:this.c.y(),f:this.c.f(),i:this.c.i(),Rb:this.c.offset.x,Sb:this.c.offset.y,scale:c};if(!hc(d,this.$)){this.$=d;var d=this.canvas.getContext("2d"),f=Math.round(c*this.c.f())+2*this.padding,g=Math.round(c*this.c.i())+2*this.padding;d.canvas.width=f;d.canvas.height=g;d.clearRect(0,0,f,g);d.save();d.translate(this.padding,this.padding);
d.scale(c,c);d.lineCap="round";b&&(d.save(),this.O(d,"rgba(255,0,0,0.75)",this.c.lineWidth()+4),d.restore());d.save();this.O(d,Od(this.c.color()),this.c.lineWidth()+2);d.restore();this.O(d);d.restore()}hc(e,this.aa)||(this.aa=e,this.ib(a))};Z.prototype.Fa=function(){this.aa=this.$=this.c=p;var a=this.canvas;a&&a.parentNode&&a.parentNode.removeChild(a);this.canvas=p};function Kc(a){a=a||{};a.lineWidth||(a.lineWidth=2);Y.call(this,a);this.type(3)}A(Kc,Y);Kc.prototype.ja=function(a,b){var c=this.lineWidth()/2+1;return Xa(new J(a,b),new J(this.x(),this.y()))<=this.f()/2+c?n:r};function $d(a){Z.call(this,a);this.c=a}A($d,Z);$d.prototype.O=function(a,b,c){a.strokeStyle=b||this.c.color();a.lineWidth=c||this.c.lineWidth();a.beginPath();var b=this.c.f(),c=this.c.i(),d=Math.min(this.c.f(),this.c.i())/2;a.moveTo(b/2+d*Math.cos(0),c/2+d*Math.sin(0));a.arc(b/2,c/2,d,0,2*Math.PI,r);a.moveTo(b/2,0.25*c);a.lineTo(b/2,0.75*c);a.moveTo(0.25*b,c/2);a.lineTo(b/2,0.75*c);a.lineTo(0.75*b,c/2);a.stroke()};function Jc(a){a=a||{};a.f||(a.f=12);a.i||(a.i=12);Y.call(this,a);this.type(2)}A(Jc,Y);Jc.prototype.ja=function(a,b){var c=this.lineWidth()/2+1;return Xa(new J(a,b),new J(this.x(),this.y()))<=this.f()/2+c?n:r};function ae(a){Z.call(this,a);this.c=a}A(ae,Z);ae.prototype.O=function(a,b,c){var d=this.c.f(),e=this.c.i(),f=0.3*e;a.strokeStyle=b||this.c.color();a.lineWidth=c||this.c.lineWidth();a.beginPath();a.moveTo(0.4*d,e);a.lineTo(0.4*d,0);a.lineTo(d-f,0);a.arc(d-f,f,f,-Math.PI/2,Math.PI/2,r);a.lineTo(0.4*d,2*f);a.stroke()};function Lc(a){a=a||{};a.lineWidth||(a.lineWidth=2);Y.call(this,a);this.type(4)}A(Lc,Y);Lc.prototype.ja=function(a,b){var c=this.lineWidth()/2+1;return Xa(new J(a,b),new J(this.x(),this.y()))<=this.f()/2+c?n:r};function be(a){Z.call(this,a);this.c=a}A(be,Z);be.prototype.O=function(a,b,c){a.strokeStyle=b||this.c.color();a.lineWidth=c||this.c.lineWidth();a.beginPath();b=Math.min(this.c.f(),this.c.i())/2;a.moveTo(this.c.f()/2+b*Math.cos(0),this.c.i()/2+b*Math.sin(0));a.arc(this.c.f()/2,this.c.i()/2,b,0,2*Math.PI,r);a.stroke()};function ce(a){this.c=a;this.padding=10;this.aa=this.$=p;this.canvas=document.createElement("canvas");this.canvas.width=2*this.padding;this.canvas.height=2*this.padding;this.canvas.style.position="absolute"}
function de(a,b,c,d){var e=a.c.scale(),f=0<a.c.o();b.strokeStyle=c||a.c.color();b.lineWidth=d||a.c.lineWidth()*e;var g=f?new ac(b,a.c.t()*e,a.c.o()*e):b;g.beginPath();if(a.c.T()){var h=a.c.m(),j=h.length;H(h,function(a,b){if(0===b)g.moveTo(a.x,a.y);else{var c=h[b-1];1==b?g.lineTo((a.x+c.x)/2,(a.y+c.y)/2):g.quadraticCurveTo(c.x,c.y,(a.x+c.x)/2,(a.y+c.y)/2);b==j-1&&g.lineTo(a.x,a.y)}})}else H(a.c.m(),function(a,b){0===b?g.moveTo(a.x,a.y):g.lineTo(a.x,a.y)});g.stroke();f&&g.Fa()}
ce.prototype.O=function(a,b){a.save();a.lineCap="round";b?(a.save(),de(this,a,"rgba(255,0,0,0.75)",this.c.lineWidth()*this.c.scale()+4)):(a.save(),de(this,a,Od(this.c.color()),this.c.lineWidth()*this.c.scale()+2));a.restore();de(this,a);a.restore()};ce.prototype.ib=function(a){a=a||1;this.canvas.style.left=Math.round(a*(this.c.offset.x+this.c.G.x)-this.padding)+"px";this.canvas.style.top=Math.round(a*(this.c.offset.y+this.c.G.y)-this.padding)+"px"};
ce.prototype.Y=function(a,b,c){var a=a||1,d=this.c.Fb();d.scale=a;d.selected=!!b;d.mode=c||p;if(!hc(d,this.$)){this.$=d;d=this.c;if(0===d.m().length)d.G=p;else{var e=Number.MAX_VALUE,f=Number.MIN_VALUE,g=Number.MAX_VALUE,h=Number.MIN_VALUE;H(d.m(),function(a){e=Math.min(e,a.x);f=Math.max(f,a.x);g=Math.min(g,a.y);h=Math.max(h,a.y)});d.G=new Ub(e,g,f-e,h-g)}sc(this.c);var j=this.canvas.getContext("2d"),d=Math.round(a*this.c.G.f)+2*this.padding,l=Math.round(a*this.c.G.i)+2*this.padding;j.canvas.width=
d;j.canvas.height=l;j.clearRect(0,0,d,l);j.save();j.translate(this.padding-Math.round(a*this.c.G.x),this.padding-Math.round(a*this.c.G.y));j.scale(a,a);this.O(j,b);if(b&&c==Tb){var m=this.c.color(),q=Od(m);j.save();H(this.c.m(),function(a){j.beginPath();j.moveTo(a.x+7,a.y);j.arc(a.x,a.y,7,0,2*Math.PI,r);j.strokeStyle=q;j.lineWidth=6;j.stroke();j.strokeStyle=m;j.lineWidth=4;j.stroke()});j.restore()}j.restore()}b={Rb:this.c.offset.x,Sb:this.c.offset.y,x:this.c.G.x,y:this.c.G.y,f:this.c.G.f,i:this.c.G.i};
hc(b,this.aa)||(this.aa=b,this.ib(a))};ce.prototype.Fa=function(){this.aa=this.$=this.c=p;var a=this.canvas;a&&a.parentNode&&a.parentNode.removeChild(a);this.canvas=p};function Ic(a){a=a||{};a.f||(a.f=10);a.i||(a.i=10);Y.call(this,a);this.type(1)}A(Ic,Y);Ic.prototype.ja=function(a,b){var c=this.lineWidth()/2+2;return $b(new J(a,b),new J(this.x()-this.f()/2,this.y()-this.i()/2),new J(this.x()+this.f()/2,this.y()+this.i()/2))<c||$b(new J(a,b),new J(this.x()+this.f()/2,this.y()-this.i()/2),new J(this.x()-this.f()/2,this.y()+this.i()/2))<c?n:r};function ee(a){Z.call(this,a);this.c=a}A(ee,Z);ee.prototype.O=function(a,b,c){a.strokeStyle=b||this.c.color();a.lineWidth=c||this.c.lineWidth();a.beginPath();a.moveTo(0,0);a.lineTo(this.c.f(),this.c.i());a.moveTo(this.c.f(),0);a.lineTo(0,this.c.i());a.stroke()};function fe(a){this.c=a;this.k=jb("DIV","fullsize");this.k.appendChild(this.c.Tb);this.Xb=jb("DIV","fullsize");this.k.appendChild(this.Xb);this.Ba={};setInterval(ka(this.pb,this),10);xb(N,O,ka(this.Vb,this))}fe.prototype.Vb=function(a){this.Bb=n;a&&this.pb()};fe.prototype.pb=function(){this.Bb&&this.Y();this.Bb=r};
fe.prototype.Y=function(a){for(var b={},c=0,d=this.c.D.length;c<d;c++){a:{var e=this.c.D[c],f=a,f=f||1,g=this.Ba[e.id];if(!g){switch(e.type()){case Sb:g=new ce(e);break;case 1:g=new ee(e);break;case 2:g=new ae(e);break;case 3:g=new $d(e);break;case 4:g=new be(e)}if(!g)break a;this.Ba[e.id]=g;this.k.appendChild(g.canvas)}g.Y(f,this.c.selected==e.id,this.c.mode.id)}b[this.c.D[c].id]=n}for(var h in this.Ba)b[h]||(this.Ba[h].Fa(),delete this.Ba[h])};var xc=13;function ge(a){this.J=a;this.d={};for(var a=this.J.className.split(" "),b=0,c=a.length;b<c;b++)this.d[a[b]]=n}function he(a){var b=[],c;for(c in a.d)b.push(c);return b.join(" ")}ge.prototype.addClass=function(a){for(var a=a.split(" "),b=0,c=a.length;b<c;b++)this.d[a[b]]=n;this.J.className=he(this)};ge.prototype.removeClass=function(a){for(var a=a.split(" "),b=0,c=a.length;b<c;b++)delete this.d[a[b]];this.J.className=he(this)};function ie(a,b,c){function d(){if(!e.j){var a=parseFloat(e.input.value);z(a)&&(a/=e.U);a:{for(var a=[a,e.qa,e.value],b=a.length,c=0;c<b;c++)if(a[c]||0===a[c]||""===a[c]||a[c]===r){a=a[c];break a}a=p}e.F(a)}}var a=a||{},e=this;this.sb=this.Mb=this.input=p;this.k=W({d:"spinner",css:a.css||p,children:[{d:"spinner-textbox",children:[{A:"input",type:"text",create:function(a){e.input=a}}]},{d:"spinner-buttons",children:[{d:"spinner-up",create:function(a){e.Mb=a},children:[{d:"icon-13 icon-13-spinner-arrows"}]},
{d:"spinner-down",create:function(a){e.sb=a},children:[{d:"icon-13 icon-13-spinner-arrows"}]}]}]});this.H=new ge(this.k);this.j=a.disabled||r;this.min=a.min||0;this.max=a.max===k?100:a.max;this.step=a.step||1;this.round=a.round||0;this.loop=!!a.loop;this.gb=a.gb||"";this.qa=a.qa||0;this.U=a.U||1;this.Wa=a.Wa===k?this.round:a.Wa;this.value=0;this.S=[];this.tb=[];this.lb=[];this.F(a.value||this.qa||0,n);a.change&&this.S.push(a.change);a.focus&&this.tb.push(a.focus);a.blur&&this.lb.push(a.blur);b&&this.appendTo(b,
c);L(this.input,"change",function(){d()});L(this.input,"keydown",function(a){if(!e.j){var b=a.keyCode;38==b?(ke(e),a.preventDefault()):40==b?(le(e),a.preventDefault()):13==b&&(d(),a.preventDefault())}});L(this.input,"focus",function(){setTimeout(function(){e.input.select()},10);H(e.tb,function(a){a.call(e,e.value)})});L(this.input,"blur",function(){H(e.lb,function(a){a.call(e)})});L(this.Mb,"click",function(){e.j||ke(e)});L(this.sb,"click",function(){e.j||le(e)});this.j&&(this.j=r,this.disable())}
function ke(a){!z(a.value)&&a.Ha!=p&&(a.value=a.Ha);var b=(Math.round(a.U*a.value/a.step)+1)*a.step/a.U;a.loop&&b>a.max&&(b=a.min+(b-(a.max+1)));a.F(b)}function le(a){!z(a.value)&&a.Ha!=p&&(a.value=a.Ha);var b=(Math.round(a.U*a.value/a.step)-1)*a.step/a.U;a.loop&&b<a.min&&(b=a.max+1-(a.min-b));a.F(b)}s=ie.prototype;
s.F=function(a,b){var c=r;if(a!==this.value||b)a=parseFloat(a),isNaN(a)?this.qa!==p&&(this.value=this.qa):(this.value=a>this.max?this.max:a<this.min?this.min:a,this.Ha=this.value=1*this.value.toFixed(this.round)),this.va(!!b),c=n;if(!b||c||""===this.input.value)this.input.value=x(this.value)?this.value:(this.value*this.U).toFixed(this.Wa||0).replace(/^([^\.]*)$/,"$1.").replace(/\.?0*$/,"")+this.gb};s.va=function(a){var b=this;H(this.S,function(c){c.call(b,b.value,!!a)})};
s.appendTo=function(a,b){this.k.style.width=b?b+"px":"auto";a.appendChild(this.k);return this};s.fb=function(a){if(this.j)return this;this.F(a,n);return this};s.focus=function(){this.input.focus();return this};s.blur=function(){this.input.blur();return this};s.enable=function(){this.j&&(this.H.removeClass("disabled"),this.j=this.input.disabled=r);return this};s.disable=function(){this.j||(this.H.addClass("disabled"),this.j=this.input.disabled=n);return this};function me(a,b,c,d){b=b||{};this.nb=a;this.k=W({d:"button-bar"+(b.d?" "+b.d:""),css:b.css||p});this.H=new ge(this.k);this.j=b.disabled||r;this.value=[];this.S=[];b.change&&this.S.push(b.change);c&&this.appendTo(c,d);this.Va();this.j&&this.disable()}s=me.prototype;s.F=function(a){this.value.push(a)};s.va=function(a){var b=this;H(this.S,function(c){c.call(b,b.value,!!a)})};s.appendTo=function(a,b){this.k.style.width=b?b+"px":"auto";a.appendChild(this.k);return this};
s.Va=function(){var a=this;this.value=[];H(this.nb,function(b){var c=b.selected&&b.selected(),d=a.j||b.disabled&&b.disabled();c&&(b.value||0===b.value||b.value===r)&&a.F(b.value);c=W({d:"button-bar-item"+(c?" selected":"")+(d&&!a.j?" disabled":""),title:b.oa||p,click:function(){d=a.j||b.disabled&&b.disabled();d||(b.action(),a.refresh(n))},children:[{d:"icon-13 icon-13-"+b.ka}]});a.k.appendChild(c)})};
s.refresh=function(a){var b=this;this.value=[];H(this.nb,function(a,d){var e=a.selected&&a.selected(),f=b.j||a.disabled&&a.disabled();e&&(a.value||0===a.value||a.value===r)&&b.F(a.value);(db&&b.k.children!=k?b.k.children:Ta(b.k.childNodes,function(a){return 1==a.nodeType}))[d].className="button-bar-item"+(e?" selected":"")+(f&&!b.j?" disabled":"")});this.va(!a||r);return this};s.enable=function(){this.j&&(this.H.removeClass("disabled"),this.j=r);return this.refresh()};
s.disable=function(){this.j||(this.H.addClass("disabled"),this.j=n);return this.refresh()};function ne(a,b,c){var a=a||{},d=this;this.Qa=this.Kb=p;this.k=W({d:"color-well",children:[{d:"color-well-wrapper",children:[{d:"swatch-container",click:function(a,b){if(!d.j){var c=qb(b),h=sb(b);N.p(oe,c.x+h.width/2,c.y+h.height+2,function(a){d.F(a)},d.value||p)}},children:[{d:"swatch",create:function(a){d.Kb=a},children:[{A:"canvas",css:{position:"absolute"},create:function(a){d.Qa=a}}]},{d:"border"}]}]}]});this.H=new ge(this.k);this.j=a.disabled||r;this.value=a.value||new X("#fff");this.S=[];a.change&&
this.S.push(a.change);b&&this.appendTo(b,c);this.j&&this.disable()}s=ne.prototype;s.Y=function(a){if(!this.ac){var b=sb(this.Kb);if(0==b.width&&!a)return;this.Qa.width=b.width;this.Qa.height=b.height;this.ac=n}var a=this.Qa.getContext("2d"),c=this.value;this.H.removeClass("no-fill");this.j&&(c=new X("#ccccccff"));c||this.H.addClass("no-fill");var b=a.canvas.width,d=a.canvas.height;a.clearRect(0,0,b,d);c&&(a.save(),c=Pd(c),c=Ld(c),a.fillStyle="rgba("+c.join(",")+")",a.fillRect(0,0,b,d),a.restore())};
s.F=function(a,b){this.value=a;this.Y();this.va(!!b)};s.va=function(a){var b=this;H(this.S,function(c){c.call(b,b.value,!!a)})};s.appendTo=function(a,b){this.k.style.width=b?b+"px":"";a.appendChild(this.k);return this};s.fb=function(a){this.F(new X(a),n);return this};s.enable=function(){this.j&&(this.H.removeClass("disabled"),this.j=r,this.Y());return this};s.disable=function(){this.j||(this.H.addClass("disabled"),this.j=n,this.Y());return this};function pe(a){if(qe[a]){var b=a;return b="en"!=re?qe[a][re]||qe[a].en||a:qe[a].en||a}return a}var re="en",qe={};function se(){function a(){return!z(U(qc))}function b(a,b,c,f){return new me([{ka:a,action:function(){N.p(Q,b,f)},oa:pe(c),selected:function(){return e.mode==b&&(f===k||f==e.la)},disabled:function(){return r}}],p,te(d))}var c=this;this.k=jb("DIV","option-bar");this.viewport=jb("DIV","fullsize");this.k.appendChild(this.viewport);this.Eb=[];this.jc=p;var d=this.k,e=this,f=b("tool-select",Bc,"Select Tool"),g=b("tool-line",Ec,"Line Tool"),h=b("tool-anchor",V,"Anchor Tool",1),j=b("tool-piton",V,"Piton Tool",
2),l=b("tool-rappel",V,"Rappel Tool",3),m=b("tool-belay",V,"Belay Tool",4);ue(d);var q=new ne({change:function(a,b){b||T(lc,a.C())}},te(d));q.refresh=ka(this.Ib,this,q,lc);ue(d);var t=W({d:"option-bar-label-left",text:"Scale:",children:p});d.appendChild(t);t=new ie({min:0.5,max:4,step:10,round:2,width:60,value:1,U:100,gb:"%",change:function(a,b){b||T(kc,a)}},te(d),50);t.refresh=ka(this.Ib,this,t,kc);ue(d);var y=new me([{ka:"line-solid",action:function(){T(qc,0)},oa:pe("Solid Line"),selected:function(){return 0===
U(qc)},disabled:a},{ka:"line-dashed",action:function(){T(qc,10);T(pc,10)},oa:pe("Dashed Line"),selected:function(){return 2<U(pc)},disabled:a},{ka:"line-dotted",action:function(){T(qc,8);T(pc,0.01)},oa:pe("Dotted Line"),selected:function(){return 0<U(pc)&&2>=U(pc)},disabled:a}],p,te(d));ue(d);var v={Ob:[{ka:"line-curved",P:rc,oa:pe("Toggle Line Curvature")}]},pb=[];H(v.Ob,function(a){v.P?(a.action=function(){T(v.P,a.val)},a.selected=function(){return U(v.P)==a.val},a.disabled=function(){return U(v.P)===
k}):a.P&&(a.action=function(){T(a.P,!U(a.P))},a.selected=function(){return!!U(a.P)},a.disabled=function(){return U(a.P)===k});pb.push(a)});var w=new me(pb,p,te(d)),F=new me([{ka:"line-edit",action:function(){N.p(Q,Tb)},oa:pe("Edit Line Shape"),selected:function(){return e.mode==Tb},disabled:a}],p,te(d)),je=[f,g,h,j,l,m,q,t,y,w,F];this.Eb.push(function(){H(je,function(a){a.refresh&&a.refresh()})});this.la=this.mode=p;xb(N,Q,function(a,b){c.mode=a;c.la=b;c.refresh()});N.p(Q,Bc)}
se.prototype.V=function(){xb(N,Ob,ka(this.refresh,this))};function te(a){var b=W({d:"option-bar-input"});a.appendChild(b);return b}function ue(a){var b=W({d:"option-bar-divider"});a.appendChild(b)}se.prototype.Ib=function(a,b){var c=U(b);c===k?(a.fb(p),a.disable()):(a.enable(),a.fb(c))};se.prototype.refresh=function(){H(this.Eb,function(a){a()})};function ve(a){var b=this;this.ia=a;this.jb=W({id:"betacreator",children:[{d:"fullsize viewport",create:function(a){b.viewport=a}},{d:"fullsize viewport",create:function(a){b.Ga=a}},{d:"bc-gui",create:function(a){b.Lb=a}}]});this.canvas=new fe(this.ia.canvas);this.viewport.appendChild(this.canvas.k);this.Cb=new se;this.Lb.appendChild(this.Cb.k);this.qb=new Ud;xb(N,oe,function(a,c,f,g){b.qb.show(a,c,f,g)});this.Lb.appendChild(this.qb.k);var c=this;L(this.jb,"mousedown",function(){N.p(Yd)});L(this.Ga,
"mousedown",function(a){c.canvas.c.ba(a)});L(this.Ga,"mousemove",function(a){c.canvas.c.ca(a)});L(this.Ga,"mouseup",function(a){c.canvas.c.da(a)});L(this.Ga,"dblclick",function(a){c.canvas.c.Ea(a)});L(document,"keydown",function(a){a.stopPropagation();if(!c.canvas.c.ta(a)){var b=r;switch(a.keyCode){case 65:N.p(Q,V,1);break;case 66:N.p(Q,V,4);break;case 76:N.p(Q,Ec);break;case 80:N.p(Q,V,2);break;case 82:N.p(Q,V,3);break;case 86:case 27:N.p(Q,Bc);break;case 89:if(a.ctrlKey||a.metaKey)b=n,Hc(c.ia.canvas);
break;case 90:if(a.ctrlKey||a.metaKey)if(b=n,a.shiftKey)Hc(c.ia.canvas);else{var f=c.ia.canvas;if(0!==f.Aa.length){var g=[];H(f.Aa[0],function(a){a=yc(a);a!=p&&(a.$a=n,a.Za=r,g.unshift(a),P(f,a))});f.Aa.shift();f.xa.unshift(g)}}}b&&a.preventDefault()}});this.Cb.V()};function we(a,b){var c=this,b=b||{};this.z={f:b.width||p,i:b.height||p,dc:b.imageScale||1,zoom:b.zoom||p,fc:b.replaceImg||r};this.Pa=a;var d=document.createElement("img");this.Ub=L(d,"load",function(){c.V(d)});d.src=this.Pa.src}
we.prototype.V=function(a){Jb(this.Ub);this.canvas=new Dc(this,a);this.Ya=new ve(this);var b=this.Ya.jb,a={position:"relative",display:"inherit"==this.Pa.style.display?"inline-block":this.Pa.style.display||"inline-block",width:(this.z.f||a.width)+"px",height:(this.z.i||a.height)+29+"px"};x(a)?lb(b,k,a):Pa(a,la(lb,b));b=this.Pa;(a=b.parentNode)&&a.replaceChild(this.Ya.jb,b)};var N=new wb,O="cr",Ob="sc",oe="scp",Yd="ho",Q="m",Bc=0,Ec=1,V=2,Tb=4;ba("bc.Client",we);})();
